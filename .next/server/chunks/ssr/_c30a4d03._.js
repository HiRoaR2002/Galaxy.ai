module.exports=[47349,(a,b,c)=>{"use strict";var d=a.r(72131);d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},87610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},97514,(a,b,c)=>{"use strict";var d=a.r(72131),e=a.r(87610),f="function"==typeof Object.is?Object.is:function(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},g=e.useSyncExternalStore,h=d.useRef,i=d.useEffect,j=d.useMemo,k=d.useDebugValue;c.useSyncExternalStoreWithSelector=function(a,b,c,d,e){var l=h(null);if(null===l.current){var m={hasValue:!1,value:null};l.current=m}else m=l.current;var n=g(a,(l=j(function(){function a(a){if(!i){if(i=!0,g=a,a=d(a),void 0!==e&&m.hasValue){var b=m.value;if(e(b,a))return h=b}return h=a}if(b=h,f(g,a))return b;var c=d(a);return void 0!==e&&e(b,c)?(g=a,b):(g=a,h=c)}var g,h,i=!1,j=void 0===c?null:c;return[function(){return a(b())},null===j?void 0:function(){return a(j())}]},[b,c,d,e]))[0],l[1]);return i(function(){m.hasValue=!0,m.value=n},[n]),k(n),n}},64442,(a,b,c)=>{"use strict";b.exports=a.r(97514)},40777,a=>{"use strict";let b;var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=a.i(87924),s=a.i(72131);function t(a){if("string"==typeof a||"number"==typeof a)return""+a;let b="";if(Array.isArray(a))for(let c=0,d;c<a.length;c++)""!==(d=t(a[c]))&&(b+=(b&&" ")+d);else for(let c in a)a[c]&&(b+=(b&&" ")+c);return b}var u=a.i(64442);let v={get url(){return`file://${a.P("node_modules/@reactflow/core/node_modules/zustand/esm/vanilla.mjs")}`}},w=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a)),destroy:()=>{(v.env?v.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),c.clear()}},g=b=a(d,e,f);return f},{useDebugValue:x}=s.default,{useSyncExternalStoreWithSelector:y}=u.default,z=a=>a;function A(a,b=z,c){let d=y(a.subscribe,a.getState,a.getServerState||a.getInitialState,b,c);return x(d),d}let B=(a,b)=>{let c=a?w(a):w,d=(a,d=b)=>A(c,a,d);return Object.assign(d,c),d};function C(a,b){if(Object.is(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;if(a instanceof Map&&b instanceof Map){if(a.size!==b.size)return!1;for(let[c,d]of a)if(!Object.is(d,b.get(c)))return!1;return!0}if(a instanceof Set&&b instanceof Set){if(a.size!==b.size)return!1;for(let c of a)if(!b.has(c))return!1;return!0}let c=Object.keys(a);if(c.length!==Object.keys(b).length)return!1;for(let d of c)if(!Object.prototype.hasOwnProperty.call(b,d)||!Object.is(a[d],b[d]))return!1;return!0}var D={value:()=>{}};function E(){for(var a,b=0,c=arguments.length,d={};b<c;++b){if(!(a=arguments[b]+"")||a in d||/[\s.]/.test(a))throw Error("illegal type: "+a);d[a]=[]}return new F(d)}function F(a){this._=a}function G(a,b,c){for(var d=0,e=a.length;d<e;++d)if(a[d].name===b){a[d]=D,a=a.slice(0,d).concat(a.slice(d+1));break}return null!=c&&a.push({name:b,value:c}),a}function H(){}function I(a){return null==a?H:function(){return this.querySelector(a)}}function J(){return[]}function K(a){return null==a?J:function(){return this.querySelectorAll(a)}}function L(a){return function(){return this.matches(a)}}function M(a){return function(b){return b.matches(a)}}F.prototype=E.prototype={constructor:F,on:function(a,b){var c,d=this._,e=(a+"").trim().split(/^|\s+/).map(function(a){var b="",c=a.indexOf(".");if(c>=0&&(b=a.slice(c+1),a=a.slice(0,c)),a&&!d.hasOwnProperty(a))throw Error("unknown type: "+a);return{type:a,name:b}}),f=-1,g=e.length;if(arguments.length<2){for(;++f<g;)if((c=(a=e[f]).type)&&(c=function(a,b){for(var c,d=0,e=a.length;d<e;++d)if((c=a[d]).name===b)return c.value}(d[c],a.name)))return c;return}if(null!=b&&"function"!=typeof b)throw Error("invalid callback: "+b);for(;++f<g;)if(c=(a=e[f]).type)d[c]=G(d[c],a.name,b);else if(null==b)for(c in d)d[c]=G(d[c],a.name,null);return this},copy:function(){var a={},b=this._;for(var c in b)a[c]=b[c].slice();return new F(a)},call:function(a,b){if((c=arguments.length-2)>0)for(var c,d,e=Array(c),f=0;f<c;++f)e[f]=arguments[f+2];if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);for(d=this._[a],f=0,c=d.length;f<c;++f)d[f].value.apply(b,e)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);for(var d=this._[a],e=0,f=d.length;e<f;++e)d[e].value.apply(b,c)}};var N=Array.prototype.find;function O(){return this.firstElementChild}var P=Array.prototype.filter;function Q(){return Array.from(this.children)}function R(a){return Array(a.length)}function S(a,b){this.ownerDocument=a.ownerDocument,this.namespaceURI=a.namespaceURI,this._next=null,this._parent=a,this.__data__=b}function T(a,b,c,d,e,f){for(var g,h=0,i=b.length,j=f.length;h<j;++h)(g=b[h])?(g.__data__=f[h],d[h]=g):c[h]=new S(a,f[h]);for(;h<i;++h)(g=b[h])&&(e[h]=g)}function U(a,b,c,d,e,f,g){var h,i,j,k=new Map,l=b.length,m=f.length,n=Array(l);for(h=0;h<l;++h)(i=b[h])&&(n[h]=j=g.call(i,i.__data__,h,b)+"",k.has(j)?e[h]=i:k.set(j,i));for(h=0;h<m;++h)j=g.call(a,f[h],h,f)+"",(i=k.get(j))?(d[h]=i,i.__data__=f[h],k.delete(j)):c[h]=new S(a,f[h]);for(h=0;h<l;++h)(i=b[h])&&k.get(n[h])===i&&(e[h]=i)}function V(a){return a.__data__}function W(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}S.prototype={constructor:S,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};var X="http://www.w3.org/1999/xhtml";let Y={svg:"http://www.w3.org/2000/svg",xhtml:X,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Z(a){var b=a+="",c=b.indexOf(":");return c>=0&&"xmlns"!==(b=a.slice(0,c))&&(a=a.slice(c+1)),Y.hasOwnProperty(b)?{space:Y[b],local:a}:a}function $(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView}function _(a,b){return a.style.getPropertyValue(b)||$(a).getComputedStyle(a,null).getPropertyValue(b)}function aa(a){return a.trim().split(/^|\s+/)}function ab(a){return a.classList||new ac(a)}function ac(a){this._node=a,this._names=aa(a.getAttribute("class")||"")}function ad(a,b){for(var c=ab(a),d=-1,e=b.length;++d<e;)c.add(b[d])}function ae(a,b){for(var c=ab(a),d=-1,e=b.length;++d<e;)c.remove(b[d])}function af(){this.textContent=""}function ag(){this.innerHTML=""}function ah(){this.nextSibling&&this.parentNode.appendChild(this)}function ai(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function aj(a){var b=Z(a);return(b.local?function(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}:function(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return c===X&&b.documentElement.namespaceURI===X?b.createElement(a):b.createElementNS(c,a)}})(b)}function ak(){return null}function al(){var a=this.parentNode;a&&a.removeChild(this)}function am(){var a=this.cloneNode(!1),b=this.parentNode;return b?b.insertBefore(a,this.nextSibling):a}function an(){var a=this.cloneNode(!0),b=this.parentNode;return b?b.insertBefore(a,this.nextSibling):a}function ao(a){return function(){var b=this.__on;if(b){for(var c,d=0,e=-1,f=b.length;d<f;++d)(c=b[d],a.type&&c.type!==a.type||c.name!==a.name)?b[++e]=c:this.removeEventListener(c.type,c.listener,c.options);++e?b.length=e:delete this.__on}}}function ap(a,b,c){return function(){var d,e=this.__on,f=function(a){b.call(this,a,this.__data__)};if(e){for(var g=0,h=e.length;g<h;++g)if((d=e[g]).type===a.type&&d.name===a.name){this.removeEventListener(d.type,d.listener,d.options),this.addEventListener(d.type,d.listener=f,d.options=c),d.value=b;return}}this.addEventListener(a.type,f,c),d={type:a.type,name:a.name,value:b,listener:f,options:c},e?e.push(d):this.__on=[d]}}function aq(a,b,c){var d=$(a),e=d.CustomEvent;"function"==typeof e?e=new e(b,c):(e=d.document.createEvent("Event"),c?(e.initEvent(b,c.bubbles,c.cancelable),e.detail=c.detail):e.initEvent(b,!1,!1)),a.dispatchEvent(e)}ac.prototype={add:function(a){0>this._names.indexOf(a)&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var b=this._names.indexOf(a);b>=0&&(this._names.splice(b,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};var ar=[null];function as(a,b){this._groups=a,this._parents=b}function at(){return new as([[document.documentElement]],ar)}function au(a){return"string"==typeof a?new as([[document.querySelector(a)]],[document.documentElement]):new as([[a]],ar)}as.prototype=at.prototype={constructor:as,select:function(a){"function"!=typeof a&&(a=I(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var f,g,h=b[e],i=h.length,j=d[e]=Array(i),k=0;k<i;++k)(f=h[k])&&(g=a.call(f,f.__data__,k,h))&&("__data__"in f&&(g.__data__=f.__data__),j[k]=g);return new as(d,this._parents)},selectAll:function(a){if("function"==typeof a){var b;b=a,a=function(){var a;return a=b.apply(this,arguments),null==a?[]:Array.isArray(a)?a:Array.from(a)}}else a=K(a);for(var c=this._groups,d=c.length,e=[],f=[],g=0;g<d;++g)for(var h,i=c[g],j=i.length,k=0;k<j;++k)(h=i[k])&&(e.push(a.call(h,h.__data__,k,i)),f.push(h));return new as(e,f)},selectChild:function(a){var b;return this.select(null==a?O:(b="function"==typeof a?a:M(a),function(){return N.call(this.children,b)}))},selectChildren:function(a){var b;return this.selectAll(null==a?Q:(b="function"==typeof a?a:M(a),function(){return P.call(this.children,b)}))},filter:function(a){"function"!=typeof a&&(a=L(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var f,g=b[e],h=g.length,i=d[e]=[],j=0;j<h;++j)(f=g[j])&&a.call(f,f.__data__,j,g)&&i.push(f);return new as(d,this._parents)},data:function(a,b){if(!arguments.length)return Array.from(this,V);var c=b?U:T,d=this._parents,e=this._groups;"function"!=typeof a&&(s=a,a=function(){return s});for(var f=e.length,g=Array(f),h=Array(f),i=Array(f),j=0;j<f;++j){var k=d[j],l=e[j],m=l.length,n="object"==typeof(r=a.call(k,k&&k.__data__,j,d))&&"length"in r?r:Array.from(r),o=n.length,p=h[j]=Array(o),q=g[j]=Array(o);c(k,l,p,q,i[j]=Array(m),n,b);for(var r,s,t,u,v=0,w=0;v<o;++v)if(t=p[v]){for(v>=w&&(w=v+1);!(u=q[w])&&++w<o;);t._next=u||null}}return(g=new as(g,d))._enter=h,g._exit=i,g},enter:function(){return new as(this._enter||this._groups.map(R),this._parents)},exit:function(){return new as(this._exit||this._groups.map(R),this._parents)},join:function(a,b,c){var d=this.enter(),e=this,f=this.exit();return"function"==typeof a?(d=a(d))&&(d=d.selection()):d=d.append(a+""),null!=b&&(e=b(e))&&(e=e.selection()),null==c?f.remove():c(f),d&&e?d.merge(e).order():e},merge:function(a){for(var b=a.selection?a.selection():a,c=this._groups,d=b._groups,e=c.length,f=d.length,g=Math.min(e,f),h=Array(e),i=0;i<g;++i)for(var j,k=c[i],l=d[i],m=k.length,n=h[i]=Array(m),o=0;o<m;++o)(j=k[o]||l[o])&&(n[o]=j);for(;i<e;++i)h[i]=c[i];return new as(h,this._parents)},selection:function(){return this},order:function(){for(var a=this._groups,b=-1,c=a.length;++b<c;)for(var d,e=a[b],f=e.length-1,g=e[f];--f>=0;)(d=e[f])&&(g&&4^d.compareDocumentPosition(g)&&g.parentNode.insertBefore(d,g),g=d);return this},sort:function(a){function b(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}a||(a=W);for(var c=this._groups,d=c.length,e=Array(d),f=0;f<d;++f){for(var g,h=c[f],i=h.length,j=e[f]=Array(i),k=0;k<i;++k)(g=h[k])&&(j[k]=g);j.sort(b)}return new as(e,this._parents).order()},call:function(){var a=arguments[0];return arguments[0]=this,a.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var a=this._groups,b=0,c=a.length;b<c;++b)for(var d=a[b],e=0,f=d.length;e<f;++e){var g=d[e];if(g)return g}return null},size:function(){let a=0;for(let b of this)++a;return a},empty:function(){return!this.node()},each:function(a){for(var b=this._groups,c=0,d=b.length;c<d;++c)for(var e,f=b[c],g=0,h=f.length;g<h;++g)(e=f[g])&&a.call(e,e.__data__,g,f);return this},attr:function(a,b){var c=Z(a);if(arguments.length<2){var d=this.node();return c.local?d.getAttributeNS(c.space,c.local):d.getAttribute(c)}return this.each((null==b?c.local?function(a){return function(){this.removeAttributeNS(a.space,a.local)}}:function(a){return function(){this.removeAttribute(a)}}:"function"==typeof b?c.local?function(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}}:function(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}}:c.local?function(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}:function(a,b){return function(){this.setAttribute(a,b)}})(c,b))},style:function(a,b,c){return arguments.length>1?this.each((null==b?function(a){return function(){this.style.removeProperty(a)}}:"function"==typeof b?function(a,b,c){return function(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}}:function(a,b,c){return function(){this.style.setProperty(a,b,c)}})(a,b,null==c?"":c)):_(this.node(),a)},property:function(a,b){return arguments.length>1?this.each((null==b?function(a){return function(){delete this[a]}}:"function"==typeof b?function(a,b){return function(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}}:function(a,b){return function(){this[a]=b}})(a,b)):this.node()[a]},classed:function(a,b){var c=aa(a+"");if(arguments.length<2){for(var d=ab(this.node()),e=-1,f=c.length;++e<f;)if(!d.contains(c[e]))return!1;return!0}return this.each(("function"==typeof b?function(a,b){return function(){(b.apply(this,arguments)?ad:ae)(this,a)}}:b?function(a){return function(){ad(this,a)}}:function(a){return function(){ae(this,a)}})(c,b))},text:function(a){return arguments.length?this.each(null==a?af:("function"==typeof a?function(a){return function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}}:function(a){return function(){this.textContent=a}})(a)):this.node().textContent},html:function(a){return arguments.length?this.each(null==a?ag:("function"==typeof a?function(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}:function(a){return function(){this.innerHTML=a}})(a)):this.node().innerHTML},raise:function(){return this.each(ah)},lower:function(){return this.each(ai)},append:function(a){var b="function"==typeof a?a:aj(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})},insert:function(a,b){var c="function"==typeof a?a:aj(a),d=null==b?ak:"function"==typeof b?b:I(b);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})},remove:function(){return this.each(al)},clone:function(a){return this.select(a?an:am)},datum:function(a){return arguments.length?this.property("__data__",a):this.node().__data__},on:function(a,b,c){var d,e,f=(a+"").trim().split(/^|\s+/).map(function(a){var b="",c=a.indexOf(".");return c>=0&&(b=a.slice(c+1),a=a.slice(0,c)),{type:a,name:b}}),g=f.length;if(arguments.length<2){var h=this.node().__on;if(h){for(var i,j=0,k=h.length;j<k;++j)for(d=0,i=h[j];d<g;++d)if((e=f[d]).type===i.type&&e.name===i.name)return i.value}return}for(d=0,h=b?ap:ao;d<g;++d)this.each(h(f[d],b,c));return this},dispatch:function(a,b){return this.each(("function"==typeof b?function(a,b){return function(){return aq(this,a,b.apply(this,arguments))}}:function(a,b){return function(){return aq(this,a,b)}})(a,b))},[Symbol.iterator]:function*(){for(var a=this._groups,b=0,c=a.length;b<c;++b)for(var d,e=a[b],f=0,g=e.length;f<g;++f)(d=e[f])&&(yield d)}};let av={passive:!1},aw={capture:!0,passive:!1};function ax(a){a.stopImmediatePropagation()}function ay(a){a.preventDefault(),a.stopImmediatePropagation()}function az(a){var b=a.document.documentElement,c=au(a).on("dragstart.drag",ay,aw);"onselectstart"in b?c.on("selectstart.drag",ay,aw):(b.__noselect=b.style.MozUserSelect,b.style.MozUserSelect="none")}function aA(a,b){var c=a.document.documentElement,d=au(a).on("dragstart.drag",null);b&&(d.on("click.drag",ay,aw),setTimeout(function(){d.on("click.drag",null)},0)),"onselectstart"in c?d.on("selectstart.drag",null):(c.style.MozUserSelect=c.__noselect,delete c.__noselect)}function aB(a){return((a=Math.exp(a))+1/a)/2}let aC=function a(b,c,d){function e(a,e){var f,g,h=a[0],i=a[1],j=a[2],k=e[0],l=e[1],m=e[2],n=k-h,o=l-i,p=n*n+o*o;if(p<1e-12)g=Math.log(m/j)/b,f=function(a){return[h+a*n,i+a*o,j*Math.exp(b*a*g)]};else{var q=Math.sqrt(p),r=(m*m-j*j+d*p)/(2*j*c*q),s=(m*m-j*j-d*p)/(2*m*c*q),t=Math.log(Math.sqrt(r*r+1)-r);g=(Math.log(Math.sqrt(s*s+1)-s)-t)/b,f=function(a){var d,e,f=a*g,k=aB(t),l=j/(c*q)*(k*(((d=Math.exp(2*(d=b*f+t)))-1)/(d+1))-((e=Math.exp(e=t))-1/e)/2);return[h+l*n,i+l*o,j*k/aB(b*f+t)]}}return f.duration=1e3*g*b/Math.SQRT2,f}return e.rho=function(b){var c=Math.max(.001,+b),d=c*c;return a(c,d,d*d)},e}(Math.SQRT2,2,4);function aD(a,b){if(a=function(a){let b;for(;b=a.sourceEvent;)a=b;return a}(a),void 0===b&&(b=a.currentTarget),b){var c=b.ownerSVGElement||b;if(c.createSVGPoint){var d=c.createSVGPoint();return d.x=a.clientX,d.y=a.clientY,[(d=d.matrixTransform(b.getScreenCTM().inverse())).x,d.y]}if(b.getBoundingClientRect){var e=b.getBoundingClientRect();return[a.clientX-e.left-b.clientLeft,a.clientY-e.top-b.clientTop]}}return[a.pageX,a.pageY]}var aE,aF,aG=0,aH=0,aI=0,aJ=0,aK=0,aL=0,aM="object"==typeof performance&&performance.now?performance:Date,aN=function(a){setTimeout(a,17)};function aO(){return aK||(aN(aP),aK=aM.now()+aL)}function aP(){aK=0}function aQ(){this._call=this._time=this._next=null}function aR(a,b,c){var d=new aQ;return d.restart(a,b,c),d}function aS(){aK=(aJ=aM.now())+aL,aG=aH=0;try{aO(),++aG;for(var a,b=aE;b;)(a=aK-b._time)>=0&&b._call.call(void 0,a),b=b._next;--aG}finally{aG=0,function(){for(var a,b,c=aE,d=1/0;c;)c._call?(d>c._time&&(d=c._time),a=c,c=c._next):(b=c._next,c._next=null,c=a?a._next=b:aE=b);aF=a,aU(d)}(),aK=0}}function aT(){var a=aM.now(),b=a-aJ;b>1e3&&(aL-=b,aJ=a)}function aU(a){!aG&&(aH&&(aH=clearTimeout(aH)),a-aK>24?(a<1/0&&(aH=setTimeout(aS,a-aM.now()-aL)),aI&&(aI=clearInterval(aI))):(aI||(aJ=aM.now(),aI=setInterval(aT,1e3)),aG=1,aN(aS)))}function aV(a,b,c){var d=new aQ;return b=null==b?0:+b,d.restart(c=>{d.stop(),a(c+b)},b,c),d}aQ.prototype=aR.prototype={constructor:aQ,restart:function(a,b,c){if("function"!=typeof a)throw TypeError("callback is not a function");c=(null==c?aO():+c)+(null==b?0:+b),this._next||aF===this||(aF?aF._next=this:aE=this,aF=this),this._call=a,this._time=c,aU()},stop:function(){this._call&&(this._call=null,this._time=1/0,aU())}};var aW=E("start","end","cancel","interrupt"),aX=[];function aY(a,b,c,d,e,f){var g=a.__transition;if(g){if(c in g)return}else a.__transition={};!function(a,b,c){var d,e=a.__transition;function f(i){var j,k,l,m;if(1!==c.state)return h();for(j in e)if((m=e[j]).name===c.name){if(3===m.state)return aV(f);4===m.state?(m.state=6,m.timer.stop(),m.on.call("interrupt",a,a.__data__,m.index,m.group),delete e[j]):+j<b&&(m.state=6,m.timer.stop(),m.on.call("cancel",a,a.__data__,m.index,m.group),delete e[j])}if(aV(function(){3===c.state&&(c.state=4,c.timer.restart(g,c.delay,c.time),g(i))}),c.state=2,c.on.call("start",a,a.__data__,c.index,c.group),2===c.state){for(j=0,c.state=3,d=Array(l=c.tween.length),k=-1;j<l;++j)(m=c.tween[j].value.call(a,a.__data__,c.index,c.group))&&(d[++k]=m);d.length=k+1}}function g(b){for(var e=b<c.duration?c.ease.call(null,b/c.duration):(c.timer.restart(h),c.state=5,1),f=-1,g=d.length;++f<g;)d[f].call(a,e);5===c.state&&(c.on.call("end",a,a.__data__,c.index,c.group),h())}function h(){for(var d in c.state=6,c.timer.stop(),delete e[b],e)return;delete a.__transition}e[b]=c,c.timer=aR(function(a){c.state=1,c.timer.restart(f,c.delay,c.time),c.delay<=a&&f(a-c.delay)},0,c.time)}(a,c,{name:b,index:d,group:e,on:aW,tween:aX,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:0})}function aZ(a,b){var c=a_(a,b);if(c.state>0)throw Error("too late; already scheduled");return c}function a$(a,b){var c=a_(a,b);if(c.state>3)throw Error("too late; already running");return c}function a_(a,b){var c=a.__transition;if(!c||!(c=c[b]))throw Error("transition not found");return c}function a0(a,b){var c,d,e,f=a.__transition,g=!0;if(f){for(e in b=null==b?null:b+"",f){if((c=f[e]).name!==b){g=!1;continue}d=c.state>2&&c.state<5,c.state=6,c.timer.stop(),c.on.call(d?"interrupt":"cancel",a,a.__data__,c.index,c.group),delete f[e]}g&&delete a.__transition}}function a1(a,b){return a*=1,b*=1,function(c){return a*(1-c)+b*c}}var a2=180/Math.PI,a3={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function a4(a,b,c,d,e,f){var g,h,i;return(g=Math.sqrt(a*a+b*b))&&(a/=g,b/=g),(i=a*c+b*d)&&(c-=a*i,d-=b*i),(h=Math.sqrt(c*c+d*d))&&(c/=h,d/=h,i/=h),a*d<b*c&&(a=-a,b=-b,i=-i,g=-g),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*a2,skewX:Math.atan(i)*a2,scaleX:g,scaleY:h}}function a5(a,b,c,d){function e(a){return a.length?a.pop()+" ":""}return function(f,g){var h,i,j,k,l=[],m=[];return f=a(f),g=a(g),!function(a,d,e,f,g,h){if(a!==e||d!==f){var i=g.push("translate(",null,b,null,c);h.push({i:i-4,x:a1(a,e)},{i:i-2,x:a1(d,f)})}else(e||f)&&g.push("translate("+e+b+f+c)}(f.translateX,f.translateY,g.translateX,g.translateY,l,m),h=f.rotate,i=g.rotate,h!==i?(h-i>180?i+=360:i-h>180&&(h+=360),m.push({i:l.push(e(l)+"rotate(",null,d)-2,x:a1(h,i)})):i&&l.push(e(l)+"rotate("+i+d),j=f.skewX,k=g.skewX,j!==k?m.push({i:l.push(e(l)+"skewX(",null,d)-2,x:a1(j,k)}):k&&l.push(e(l)+"skewX("+k+d),!function(a,b,c,d,f,g){if(a!==c||b!==d){var h=f.push(e(f)+"scale(",null,",",null,")");g.push({i:h-4,x:a1(a,c)},{i:h-2,x:a1(b,d)})}else(1!==c||1!==d)&&f.push(e(f)+"scale("+c+","+d+")")}(f.scaleX,f.scaleY,g.scaleX,g.scaleY,l,m),f=g=null,function(a){for(var b,c=-1,d=m.length;++c<d;)l[(b=m[c]).i]=b.x(a);return l.join("")}}}var a6=a5(function(a){let b=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(a+"");return b.isIdentity?a3:a4(b.a,b.b,b.c,b.d,b.e,b.f)},"px, ","px)","deg)"),a7=a5(function(a){return null==a?a3:(j||(j=document.createElementNS("http://www.w3.org/2000/svg","g")),j.setAttribute("transform",a),a=j.transform.baseVal.consolidate())?a4((a=a.matrix).a,a.b,a.c,a.d,a.e,a.f):a3},", ",")",")");function a8(a,b,c){var d=a._id;return a.each(function(){var a=a$(this,d);(a.value||(a.value={}))[b]=c.apply(this,arguments)}),function(a){return a_(a,d).value[b]}}function a9(a,b,c){a.prototype=b.prototype=c,c.constructor=a}function ba(a,b){var c=Object.create(a.prototype);for(var d in b)c[d]=b[d];return c}function bb(){}var bc="\\s*([+-]?\\d+)\\s*",bd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",be="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bf=/^#([0-9a-f]{3,8})$/,bg=RegExp(`^rgb\\(${bc},${bc},${bc}\\)$`),bh=RegExp(`^rgb\\(${be},${be},${be}\\)$`),bi=RegExp(`^rgba\\(${bc},${bc},${bc},${bd}\\)$`),bj=RegExp(`^rgba\\(${be},${be},${be},${bd}\\)$`),bk=RegExp(`^hsl\\(${bd},${be},${be}\\)$`),bl=RegExp(`^hsla\\(${bd},${be},${be},${bd}\\)$`),bm={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function bn(){return this.rgb().formatHex()}function bo(){return this.rgb().formatRgb()}function bp(a){var b,c;return a=(a+"").trim().toLowerCase(),(b=bf.exec(a))?(c=b[1].length,b=parseInt(b[1],16),6===c?bq(b):3===c?new bt(b>>8&15|b>>4&240,b>>4&15|240&b,(15&b)<<4|15&b,1):8===c?br(b>>24&255,b>>16&255,b>>8&255,(255&b)/255):4===c?br(b>>12&15|b>>8&240,b>>8&15|b>>4&240,b>>4&15|240&b,((15&b)<<4|15&b)/255):null):(b=bg.exec(a))?new bt(b[1],b[2],b[3],1):(b=bh.exec(a))?new bt(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=bi.exec(a))?br(b[1],b[2],b[3],b[4]):(b=bj.exec(a))?br(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=bk.exec(a))?bz(b[1],b[2]/100,b[3]/100,1):(b=bl.exec(a))?bz(b[1],b[2]/100,b[3]/100,b[4]):bm.hasOwnProperty(a)?bq(bm[a]):"transparent"===a?new bt(NaN,NaN,NaN,0):null}function bq(a){return new bt(a>>16&255,a>>8&255,255&a,1)}function br(a,b,c,d){return d<=0&&(a=b=c=NaN),new bt(a,b,c,d)}function bs(a,b,c,d){var e;return 1==arguments.length?((e=a)instanceof bb||(e=bp(e)),e)?new bt((e=e.rgb()).r,e.g,e.b,e.opacity):new bt:new bt(a,b,c,null==d?1:d)}function bt(a,b,c,d){this.r=+a,this.g=+b,this.b=+c,this.opacity=+d}function bu(){return`#${by(this.r)}${by(this.g)}${by(this.b)}`}function bv(){let a=bw(this.opacity);return`${1===a?"rgb(":"rgba("}${bx(this.r)}, ${bx(this.g)}, ${bx(this.b)}${1===a?")":`, ${a})`}`}function bw(a){return isNaN(a)?1:Math.max(0,Math.min(1,a))}function bx(a){return Math.max(0,Math.min(255,Math.round(a)||0))}function by(a){return((a=bx(a))<16?"0":"")+a.toString(16)}function bz(a,b,c,d){return d<=0?a=b=c=NaN:c<=0||c>=1?a=b=NaN:b<=0&&(a=NaN),new bB(a,b,c,d)}function bA(a){if(a instanceof bB)return new bB(a.h,a.s,a.l,a.opacity);if(a instanceof bb||(a=bp(a)),!a)return new bB;if(a instanceof bB)return a;var b=(a=a.rgb()).r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),f=Math.max(b,c,d),g=NaN,h=f-e,i=(f+e)/2;return h?(g=b===f?(c-d)/h+(c<d)*6:c===f?(d-b)/h+2:(b-c)/h+4,h/=i<.5?f+e:2-f-e,g*=60):h=i>0&&i<1?0:g,new bB(g,h,i,a.opacity)}function bB(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function bC(a){return(a=(a||0)%360)<0?a+360:a}function bD(a){return Math.max(0,Math.min(1,a||0))}function bE(a,b,c){return(a<60?b+(c-b)*a/60:a<180?c:a<240?b+(c-b)*(240-a)/60:b)*255}function bF(a,b,c,d,e){var f=a*a,g=f*a;return((1-3*a+3*f-g)*b+(4-6*f+3*g)*c+(1+3*a+3*f-3*g)*d+g*e)/6}a9(bb,bp,{copy(a){return Object.assign(new this.constructor,this,a)},displayable(){return this.rgb().displayable()},hex:bn,formatHex:bn,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return bA(this).formatHsl()},formatRgb:bo,toString:bo}),a9(bt,bs,ba(bb,{brighter(a){return a=null==a?1.4285714285714286:Math.pow(1.4285714285714286,a),new bt(this.r*a,this.g*a,this.b*a,this.opacity)},darker(a){return a=null==a?.7:Math.pow(.7,a),new bt(this.r*a,this.g*a,this.b*a,this.opacity)},rgb(){return this},clamp(){return new bt(bx(this.r),bx(this.g),bx(this.b),bw(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bu,formatHex:bu,formatHex8:function(){return`#${by(this.r)}${by(this.g)}${by(this.b)}${by((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:bv,toString:bv})),a9(bB,function(a,b,c,d){return 1==arguments.length?bA(a):new bB(a,b,c,null==d?1:d)},ba(bb,{brighter(a){return a=null==a?1.4285714285714286:Math.pow(1.4285714285714286,a),new bB(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=null==a?.7:Math.pow(.7,a),new bB(this.h,this.s,this.l*a,this.opacity)},rgb(){var a=this.h%360+(this.h<0)*360,b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l,d=c+(c<.5?c:1-c)*b,e=2*c-d;return new bt(bE(a>=240?a-240:a+120,e,d),bE(a,e,d),bE(a<120?a+240:a-120,e,d),this.opacity)},clamp(){return new bB(bC(this.h),bD(this.s),bD(this.l),bw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let a=bw(this.opacity);return`${1===a?"hsl(":"hsla("}${bC(this.h)}, ${100*bD(this.s)}%, ${100*bD(this.l)}%${1===a?")":`, ${a})`}`}}));let bG=a=>()=>a;function bH(a,b){var c=b-a;return c?function(b){return a+b*c}:bG(isNaN(a)?b:a)}let bI=function a(b){var c,d=1==(c=+b)?bH:function(a,b){var d,e,f;return b-a?(d=a,e=b,d=Math.pow(d,f=c),e=Math.pow(e,f)-d,f=1/f,function(a){return Math.pow(d+a*e,f)}):bG(isNaN(a)?b:a)};function e(a,b){var c=d((a=bs(a)).r,(b=bs(b)).r),e=d(a.g,b.g),f=d(a.b,b.b),g=bH(a.opacity,b.opacity);return function(b){return a.r=c(b),a.g=e(b),a.b=f(b),a.opacity=g(b),a+""}}return e.gamma=a,e}(1);function bJ(a){return function(b){var c,d,e=b.length,f=Array(e),g=Array(e),h=Array(e);for(c=0;c<e;++c)d=bs(b[c]),f[c]=d.r||0,g[c]=d.g||0,h[c]=d.b||0;return f=a(f),g=a(g),h=a(h),d.opacity=1,function(a){return d.r=f(a),d.g=g(a),d.b=h(a),d+""}}}bJ(function(a){var b=a.length-1;return function(c){var d=c<=0?c=0:c>=1?(c=1,b-1):Math.floor(c*b),e=a[d],f=a[d+1],g=d>0?a[d-1]:2*e-f,h=d<b-1?a[d+2]:2*f-e;return bF((c-d/b)*b,g,e,f,h)}}),bJ(function(a){var b=a.length;return function(c){var d=Math.floor(((c%=1)<0?++c:c)*b),e=a[(d+b-1)%b],f=a[d%b],g=a[(d+1)%b],h=a[(d+2)%b];return bF((c-d/b)*b,e,f,g,h)}});var bK=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bL=RegExp(bK.source,"g");function bM(a,b){var c;return("number"==typeof b?a1:b instanceof bp?bI:(c=bp(b))?(b=c,bI):function(a,b){var c,d,e,f,g,h=bK.lastIndex=bL.lastIndex=0,i=-1,j=[],k=[];for(a+="",b+="";(e=bK.exec(a))&&(f=bL.exec(b));)(g=f.index)>h&&(g=b.slice(h,g),j[i]?j[i]+=g:j[++i]=g),(e=e[0])===(f=f[0])?j[i]?j[i]+=f:j[++i]=f:(j[++i]=null,k.push({i:i,x:a1(e,f)})),h=bL.lastIndex;return h<b.length&&(g=b.slice(h),j[i]?j[i]+=g:j[++i]=g),j.length<2?k[0]?(c=k[0].x,function(a){return c(a)+""}):(d=b,function(){return d}):(b=k.length,function(a){for(var c,d=0;d<b;++d)j[(c=k[d]).i]=c.x(a);return j.join("")})})(a,b)}var bN=at.prototype.constructor;function bO(a){return function(){this.style.removeProperty(a)}}var bP=0;function bQ(a,b,c,d){this._groups=a,this._parents=b,this._name=c,this._id=d}var bR=at.prototype;bQ.prototype=(function(a){return at().transition(a)}).prototype={constructor:bQ,select:function(a){var b=this._name,c=this._id;"function"!=typeof a&&(a=I(a));for(var d=this._groups,e=d.length,f=Array(e),g=0;g<e;++g)for(var h,i,j=d[g],k=j.length,l=f[g]=Array(k),m=0;m<k;++m)(h=j[m])&&(i=a.call(h,h.__data__,m,j))&&("__data__"in h&&(i.__data__=h.__data__),l[m]=i,aY(l[m],b,c,m,l,a_(h,c)));return new bQ(f,this._parents,b,c)},selectAll:function(a){var b=this._name,c=this._id;"function"!=typeof a&&(a=K(a));for(var d=this._groups,e=d.length,f=[],g=[],h=0;h<e;++h)for(var i,j=d[h],k=j.length,l=0;l<k;++l)if(i=j[l]){for(var m,n=a.call(i,i.__data__,l,j),o=a_(i,c),p=0,q=n.length;p<q;++p)(m=n[p])&&aY(m,b,c,p,n,o);f.push(n),g.push(i)}return new bQ(f,g,b,c)},selectChild:bR.selectChild,selectChildren:bR.selectChildren,filter:function(a){"function"!=typeof a&&(a=L(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var f,g=b[e],h=g.length,i=d[e]=[],j=0;j<h;++j)(f=g[j])&&a.call(f,f.__data__,j,g)&&i.push(f);return new bQ(d,this._parents,this._name,this._id)},merge:function(a){if(a._id!==this._id)throw Error();for(var b=this._groups,c=a._groups,d=b.length,e=c.length,f=Math.min(d,e),g=Array(d),h=0;h<f;++h)for(var i,j=b[h],k=c[h],l=j.length,m=g[h]=Array(l),n=0;n<l;++n)(i=j[n]||k[n])&&(m[n]=i);for(;h<d;++h)g[h]=b[h];return new bQ(g,this._parents,this._name,this._id)},selection:function(){return new bN(this._groups,this._parents)},transition:function(){for(var a=this._name,b=this._id,c=++bP,d=this._groups,e=d.length,f=0;f<e;++f)for(var g,h=d[f],i=h.length,j=0;j<i;++j)if(g=h[j]){var k=a_(g,b);aY(g,a,c,j,h,{time:k.time+k.delay+k.duration,delay:0,duration:k.duration,ease:k.ease})}return new bQ(d,this._parents,a,c)},call:bR.call,nodes:bR.nodes,node:bR.node,size:bR.size,empty:bR.empty,each:bR.each,on:function(a,b){var c,d,e,f,g,h,i=this._id;return arguments.length<2?a_(this.node(),i).on.on(a):this.each((c=i,d=a,e=b,h=(d+"").trim().split(/^|\s+/).every(function(a){var b=a.indexOf(".");return b>=0&&(a=a.slice(0,b)),!a||"start"===a})?aZ:a$,function(){var a=h(this,c),b=a.on;b!==f&&(g=(f=b).copy()).on(d,e),a.on=g}))},attr:function(a,b){var c=Z(a),d="transform"===c?a7:bM;return this.attrTween(a,"function"==typeof b?(c.local?function(a,b,c){var d,e,f;return function(){var g,h,i=c(this);return null==i?void this.removeAttributeNS(a.space,a.local):(g=this.getAttributeNS(a.space,a.local))===(h=i+"")?null:g===d&&h===e?f:(e=h,f=b(d=g,i))}}:function(a,b,c){var d,e,f;return function(){var g,h,i=c(this);return null==i?void this.removeAttribute(a):(g=this.getAttribute(a))===(h=i+"")?null:g===d&&h===e?f:(e=h,f=b(d=g,i))}})(c,d,a8(this,"attr."+a,b)):null==b?(c.local?function(a){return function(){this.removeAttributeNS(a.space,a.local)}}:function(a){return function(){this.removeAttribute(a)}})(c):(c.local?function(a,b,c){var d,e,f=c+"";return function(){var g=this.getAttributeNS(a.space,a.local);return g===f?null:g===d?e:e=b(d=g,c)}}:function(a,b,c){var d,e,f=c+"";return function(){var g=this.getAttribute(a);return g===f?null:g===d?e:e=b(d=g,c)}})(c,d,b))},attrTween:function(a,b){var c="attr."+a;if(arguments.length<2)return(c=this.tween(c))&&c._value;if(null==b)return this.tween(c,null);if("function"!=typeof b)throw Error();var d=Z(a);return this.tween(c,(d.local?function(a,b){var c,d;function e(){var e=b.apply(this,arguments);return e!==d&&(c=(d=e)&&function(b){this.setAttributeNS(a.space,a.local,e.call(this,b))}),c}return e._value=b,e}:function(a,b){var c,d;function e(){var e=b.apply(this,arguments);return e!==d&&(c=(d=e)&&function(b){this.setAttribute(a,e.call(this,b))}),c}return e._value=b,e})(d,b))},style:function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y="transform"==(a+="")?a6:bM;return null==b?this.styleTween(a,(d=a,function(){var a=_(this,d),b=(this.style.removeProperty(d),_(this,d));return a===b?null:a===e&&b===f?g:g=y(e=a,f=b)})).on("end.style."+a,bO(a)):"function"==typeof b?this.styleTween(a,(h=a,i=a8(this,"style."+a,b),function(){var a=_(this,h),b=i(this),c=b+"";return null==b&&(this.style.removeProperty(h),c=b=_(this,h)),a===c?null:a===j&&c===k?l:(k=c,l=y(j=a,b))})).each((m=this._id,t="end."+(s="style."+(n=a)),function(){var a=a$(this,m),b=a.on,c=null==a.value[s]?r||(r=bO(n)):void 0;(b!==o||q!==c)&&(p=(o=b).copy()).on(t,q=c),a.on=p})):this.styleTween(a,(u=a,x=b+"",function(){var a=_(this,u);return a===x?null:a===v?w:w=y(v=a,b)}),c).on("end.style."+a,null)},styleTween:function(a,b,c){var d="style."+(a+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(null==b)return this.tween(d,null);if("function"!=typeof b)throw Error();return this.tween(d,function(a,b,c){var d,e;function f(){var f=b.apply(this,arguments);return f!==e&&(d=(e=f)&&function(b){this.style.setProperty(a,f.call(this,b),c)}),d}return f._value=b,f}(a,b,null==c?"":c))},text:function(a){var b,c;return this.tween("text","function"==typeof a?(b=a8(this,"text",a),function(){var a=b(this);this.textContent=null==a?"":a}):(c=null==a?"":a+"",function(){this.textContent=c}))},textTween:function(a){var b="text";if(arguments.length<1)return(b=this.tween(b))&&b._value;if(null==a)return this.tween(b,null);if("function"!=typeof a)throw Error();return this.tween(b,function(a){var b,c;function d(){var d=a.apply(this,arguments);return d!==c&&(b=(c=d)&&function(a){this.textContent=d.call(this,a)}),b}return d._value=a,d}(a))},remove:function(){var a;return this.on("end.remove",(a=this._id,function(){var b=this.parentNode;for(var c in this.__transition)if(+c!==a)return;b&&b.removeChild(this)}))},tween:function(a,b){var c=this._id;if(a+="",arguments.length<2){for(var d,e=a_(this.node(),c).tween,f=0,g=e.length;f<g;++f)if((d=e[f]).name===a)return d.value;return null}return this.each((null==b?function(a,b){var c,d;return function(){var e=a$(this,a),f=e.tween;if(f!==c){d=c=f;for(var g=0,h=d.length;g<h;++g)if(d[g].name===b){(d=d.slice()).splice(g,1);break}}e.tween=d}}:function(a,b,c){var d,e;if("function"!=typeof c)throw Error();return function(){var f=a$(this,a),g=f.tween;if(g!==d){e=(d=g).slice();for(var h={name:b,value:c},i=0,j=e.length;i<j;++i)if(e[i].name===b){e[i]=h;break}i===j&&e.push(h)}f.tween=e}})(c,a,b))},delay:function(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?function(a,b){return function(){aZ(this,a).delay=+b.apply(this,arguments)}}:function(a,b){return b*=1,function(){aZ(this,a).delay=b}})(b,a)):a_(this.node(),b).delay},duration:function(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?function(a,b){return function(){a$(this,a).duration=+b.apply(this,arguments)}}:function(a,b){return b*=1,function(){a$(this,a).duration=b}})(b,a)):a_(this.node(),b).duration},ease:function(a){var b=this._id;return arguments.length?this.each(function(a,b){if("function"!=typeof b)throw Error();return function(){a$(this,a).ease=b}}(b,a)):a_(this.node(),b).ease},easeVarying:function(a){var b;if("function"!=typeof a)throw Error();return this.each((b=this._id,function(){var c=a.apply(this,arguments);if("function"!=typeof c)throw Error();a$(this,b).ease=c}))},end:function(){var a,b,c=this,d=c._id,e=c.size();return new Promise(function(f,g){var h={value:g},i={value:function(){0==--e&&f()}};c.each(function(){var c=a$(this,d),e=c.on;e!==a&&((b=(a=e).copy())._.cancel.push(h),b._.interrupt.push(h),b._.end.push(i)),c.on=b}),0===e&&f()})},[Symbol.iterator]:bR[Symbol.iterator]};var bS={time:null,delay:0,duration:250,ease:function(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}};at.prototype.interrupt=function(a){return this.each(function(){a0(this,a)})},at.prototype.transition=function(a){var b,c;a instanceof bQ?(b=a._id,a=a._name):(b=++bP,(c=bS).time=aO(),a=null==a?null:a+"");for(var d=this._groups,e=d.length,f=0;f<e;++f)for(var g,h=d[f],i=h.length,j=0;j<i;++j)(g=h[j])&&aY(g,a,b,j,h,c||function(a,b){for(var c;!(c=a.__transition)||!(c=c[b]);)if(!(a=a.parentNode))throw Error(`transition ${b} not found`);return c}(g,b));return new bQ(d,this._parents,a,b)};let bT=a=>()=>a;function bU(a,{sourceEvent:b,target:c,transform:d,dispatch:e}){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},sourceEvent:{value:b,enumerable:!0,configurable:!0},target:{value:c,enumerable:!0,configurable:!0},transform:{value:d,enumerable:!0,configurable:!0},_:{value:e}})}function bV(a,b,c){this.k=a,this.x=b,this.y=c}bV.prototype={constructor:bV,scale:function(a){return 1===a?this:new bV(this.k*a,this.x,this.y)},translate:function(a,b){return 0===a&0===b?this:new bV(this.k,this.x+this.k*a,this.y+this.k*b)},apply:function(a){return[a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return[(a[0]-this.x)/this.k,(a[1]-this.y)/this.k]},invertX:function(a){return(a-this.x)/this.k},invertY:function(a){return(a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bW=new bV(1,0,0);function bX(a){a.stopImmediatePropagation()}function bY(a){a.preventDefault(),a.stopImmediatePropagation()}function bZ(a){return(!a.ctrlKey||"wheel"===a.type)&&!a.button}function b$(){var a=this;return a instanceof SVGElement?(a=a.ownerSVGElement||a).hasAttribute("viewBox")?[[(a=a.viewBox.baseVal).x,a.y],[a.x+a.width,a.y+a.height]]:[[0,0],[a.width.baseVal.value,a.height.baseVal.value]]:[[0,0],[a.clientWidth,a.clientHeight]]}function b_(){return this.__zoom||bW}function b0(a){return-a.deltaY*(1===a.deltaMode?.05:a.deltaMode?1:.002)*(a.ctrlKey?10:1)}function b1(){return navigator.maxTouchPoints||"ontouchstart"in this}function b2(a,b,c){var d=a.invertX(b[0][0])-c[0][0],e=a.invertX(b[1][0])-c[1][0],f=a.invertY(b[0][1])-c[0][1],g=a.invertY(b[1][1])-c[1][1];return a.translate(e>d?(d+e)/2:Math.min(0,d)||Math.max(0,e),g>f?(f+g)/2:Math.min(0,f)||Math.max(0,g))}bV.prototype;let b3=a=>()=>a;function b4(a,{sourceEvent:b,subject:c,target:d,identifier:e,active:f,x:g,y:h,dx:i,dy:j,dispatch:k}){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},sourceEvent:{value:b,enumerable:!0,configurable:!0},subject:{value:c,enumerable:!0,configurable:!0},target:{value:d,enumerable:!0,configurable:!0},identifier:{value:e,enumerable:!0,configurable:!0},active:{value:f,enumerable:!0,configurable:!0},x:{value:g,enumerable:!0,configurable:!0},y:{value:h,enumerable:!0,configurable:!0},dx:{value:i,enumerable:!0,configurable:!0},dy:{value:j,enumerable:!0,configurable:!0},_:{value:k}})}function b5(a){return!a.ctrlKey&&!a.button}function b6(){return this.parentNode}function b7(a,b){return null==b?{x:a.x,y:a.y}:b}function b8(){return navigator.maxTouchPoints||"ontouchstart"in this}b4.prototype.on=function(){var a=this._.on.apply(this._,arguments);return a===this._?this:a},a.i(35112);let b9=(0,s.createContext)(null),ca=b9.Provider,cb="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001";function cc(a,b){let c=(0,s.useContext)(b9);if(null===c)throw Error(cb);return A(c,a,b)}let cd=()=>{let a=(0,s.useContext)(b9);if(null===a)throw Error(cb);return(0,s.useMemo)(()=>({getState:a.getState,setState:a.setState,subscribe:a.subscribe,destroy:a.destroy}),[a])},ce=a=>a.userSelectionActive?"none":"all";function cf({position:a,children:b,className:c,style:d,...e}){let f=cc(ce),g=`${a}`.split("-");return s.default.createElement("div",{className:t(["react-flow__panel",c,...g]),style:{...d,pointerEvents:f},...e},b)}function cg({proOptions:a,position:b="bottom-right"}){return a?.hideAttribution?null:s.default.createElement(cf,{position:b,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},s.default.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var ch=(0,s.memo)(({x:a,y:b,label:c,labelStyle:d={},labelShowBg:e=!0,labelBgStyle:f={},labelBgPadding:g=[2,4],labelBgBorderRadius:h=2,children:i,className:j,...k})=>{let l=(0,s.useRef)(null),[m,n]=(0,s.useState)({x:0,y:0,width:0,height:0}),o=t(["react-flow__edge-textwrapper",j]);return((0,s.useEffect)(()=>{if(l.current){let a=l.current.getBBox();n({x:a.x,y:a.y,width:a.width,height:a.height})}},[c]),void 0!==c&&c)?s.default.createElement("g",{transform:`translate(${a-m.width/2} ${b-m.height/2})`,className:o,visibility:m.width?"visible":"hidden",...k},e&&s.default.createElement("rect",{width:m.width+2*g[0],x:-g[0],y:-g[1],height:m.height+2*g[1],className:"react-flow__edge-textbg",style:f,rx:h,ry:h}),s.default.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:l,style:d},c),i):null});let ci=a=>({width:a.offsetWidth,height:a.offsetHeight}),cj=(a,b=0,c=1)=>Math.min(Math.max(a,b),c),ck=(a={x:0,y:0},b)=>({x:cj(a.x,b[0][0],b[1][0]),y:cj(a.y,b[0][1],b[1][1])}),cl=(a,b,c)=>a<b?cj(Math.abs(a-b),1,50)/50:a>c?-cj(Math.abs(a-c),1,50)/50:0,cm=(a,b)=>[20*cl(a.x,35,b.width-35),20*cl(a.y,35,b.height-35)],cn=a=>a.getRootNode?.()||window?.document,co=({x:a,y:b,width:c,height:d})=>({x:a,y:b,x2:a+c,y2:b+d}),cp=a=>({...a.positionAbsolute||{x:0,y:0},width:a.width||0,height:a.height||0}),cq=(a,b)=>Math.ceil(Math.max(0,Math.min(a.x+a.width,b.x+b.width)-Math.max(a.x,b.x))*Math.max(0,Math.min(a.y+a.height,b.y+b.height)-Math.max(a.y,b.y))),cr=a=>!isNaN(a)&&isFinite(a),cs=Symbol.for("internals"),ct=["Enter"," ","Escape"],cu=(a,b)=>{};function cv(a){let b="nativeEvent"in a?a.nativeEvent:a,c=b.composedPath?.()?.[0]||a.target;return["INPUT","SELECT","TEXTAREA"].includes(c?.nodeName)||c?.hasAttribute("contenteditable")||!!c?.closest(".nokey")}let cw=(a,b)=>{let c="clientX"in a,d=c?a.clientX:a.touches?.[0].clientX,e=c?a.clientY:a.touches?.[0].clientY;return{x:d-(b?.left??0),y:e-(b?.top??0)}},cx=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0,cy=({id:a,path:b,labelX:c,labelY:d,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:i,labelBgBorderRadius:j,style:k,markerEnd:l,markerStart:m,interactionWidth:n=20})=>s.default.createElement(s.default.Fragment,null,s.default.createElement("path",{id:a,style:k,d:b,fill:"none",className:"react-flow__edge-path",markerEnd:l,markerStart:m}),n&&s.default.createElement("path",{d:b,fill:"none",strokeOpacity:0,strokeWidth:n,className:"react-flow__edge-interaction"}),e&&cr(c)&&cr(d)?s.default.createElement(ch,{x:c,y:d,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:i,labelBgBorderRadius:j}):null);function cz(a,b,c){return void 0===c?c:d=>{let e=b().edges.find(b=>b.id===a);e&&c(d,{...e})}}function cA({sourceX:a,sourceY:b,targetX:c,targetY:d}){let e=Math.abs(c-a)/2,f=Math.abs(d-b)/2;return[c<a?c+e:c-e,d<b?d+f:d-f,e,f]}function cB({sourceX:a,sourceY:b,targetX:c,targetY:d,sourceControlX:e,sourceControlY:f,targetControlX:g,targetControlY:h}){let i=.125*a+.375*e+.375*g+.125*c,j=.125*b+.375*f+.375*h+.125*d,k=Math.abs(i-a),l=Math.abs(j-b);return[i,j,k,l]}function cC({pos:a,x1:b,y1:c,x2:d,y2:e}){return a===p.Left||a===p.Right?[.5*(b+d),c]:[b,.5*(c+e)]}function cD({sourceX:a,sourceY:b,sourcePosition:c=p.Bottom,targetX:d,targetY:e,targetPosition:f=p.Top}){let[g,h]=cC({pos:c,x1:a,y1:b,x2:d,y2:e}),[i,j]=cC({pos:f,x1:d,y1:e,x2:a,y2:b}),[k,l,m,n]=cB({sourceX:a,sourceY:b,targetX:d,targetY:e,sourceControlX:g,sourceControlY:h,targetControlX:i,targetControlY:j});return[`M${a},${b} C${g},${h} ${i},${j} ${d},${e}`,k,l,m,n]}cy.displayName="BaseEdge",(c=k||(k={})).Strict="strict",c.Loose="loose",(d=l||(l={})).Free="free",d.Vertical="vertical",d.Horizontal="horizontal",(e=m||(m={})).Partial="partial",e.Full="full",(f=n||(n={})).Bezier="default",f.Straight="straight",f.Step="step",f.SmoothStep="smoothstep",f.SimpleBezier="simplebezier",(g=o||(o={})).Arrow="arrow",g.ArrowClosed="arrowclosed",(h=p||(p={})).Left="left",h.Top="top",h.Right="right",h.Bottom="bottom";let cE=(0,s.memo)(({sourceX:a,sourceY:b,targetX:c,targetY:d,sourcePosition:e=p.Bottom,targetPosition:f=p.Top,label:g,labelStyle:h,labelShowBg:i,labelBgStyle:j,labelBgPadding:k,labelBgBorderRadius:l,style:m,markerEnd:n,markerStart:o,interactionWidth:q})=>{let[r,t,u]=cD({sourceX:a,sourceY:b,sourcePosition:e,targetX:c,targetY:d,targetPosition:f});return s.default.createElement(cy,{path:r,labelX:t,labelY:u,label:g,labelStyle:h,labelShowBg:i,labelBgStyle:j,labelBgPadding:k,labelBgBorderRadius:l,style:m,markerEnd:n,markerStart:o,interactionWidth:q})});cE.displayName="SimpleBezierEdge";let cF={[p.Left]:{x:-1,y:0},[p.Right]:{x:1,y:0},[p.Top]:{x:0,y:-1},[p.Bottom]:{x:0,y:1}},cG=({source:a,sourcePosition:b=p.Bottom,target:c})=>b===p.Left||b===p.Right?a.x<c.x?{x:1,y:0}:{x:-1,y:0}:a.y<c.y?{x:0,y:1}:{x:0,y:-1},cH=(a,b)=>Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2));function cI({sourceX:a,sourceY:b,sourcePosition:c=p.Bottom,targetX:d,targetY:e,targetPosition:f=p.Top,borderRadius:g=5,centerX:h,centerY:i,offset:j=20}){let[k,l,m,n,o]=function({source:a,sourcePosition:b=p.Bottom,target:c,targetPosition:d=p.Top,center:e,offset:f}){let g,h,i=cF[b],j=cF[d],k={x:a.x+i.x*f,y:a.y+i.y*f},l={x:c.x+j.x*f,y:c.y+j.y*f},m=cG({source:k,sourcePosition:b,target:l}),n=0!==m.x?"x":"y",o=m[n],q=[],r={x:0,y:0},s={x:0,y:0},[t,u,v,w]=cA({sourceX:a.x,sourceY:a.y,targetX:c.x,targetY:c.y});if(i[n]*j[n]==-1){g=e.x??t,h=e.y??u;let a=[{x:g,y:k.y},{x:g,y:l.y}],b=[{x:k.x,y:h},{x:l.x,y:h}];q=i[n]===o?"x"===n?a:b:"x"===n?b:a}else{let e=[{x:k.x,y:l.y}],m=[{x:l.x,y:k.y}];if(q="x"===n?i.x===o?m:e:i.y===o?e:m,b===d){let b=Math.abs(a[n]-c[n]);if(b<=f){let d=Math.min(f-1,f-b);i[n]===o?r[n]=(k[n]>a[n]?-1:1)*d:s[n]=(l[n]>c[n]?-1:1)*d}}if(b!==d){let a="x"===n?"y":"x",b=i[n]===j[a],c=k[a]>l[a],d=k[a]<l[a];(1===i[n]&&(!b&&c||b&&d)||1!==i[n]&&(!b&&d||b&&c))&&(q="x"===n?e:m)}let p={x:k.x+r.x,y:k.y+r.y},t={x:l.x+s.x,y:l.y+s.y};Math.max(Math.abs(p.x-q[0].x),Math.abs(t.x-q[0].x))>=Math.max(Math.abs(p.y-q[0].y),Math.abs(t.y-q[0].y))?(g=(p.x+t.x)/2,h=q[0].y):(g=q[0].x,h=(p.y+t.y)/2)}return[[a,{x:k.x+r.x,y:k.y+r.y},...q,{x:l.x+s.x,y:l.y+s.y},c],g,h,v,w]}({source:{x:a,y:b},sourcePosition:c,target:{x:d,y:e},targetPosition:f,center:{x:h,y:i},offset:j});return[k.reduce((a,b,c)=>a+(c>0&&c<k.length-1?function(a,b,c,d){let e=Math.min(cH(a,b)/2,cH(b,c)/2,d),{x:f,y:g}=b;if(a.x===f&&f===c.x||a.y===g&&g===c.y)return`L${f} ${g}`;if(a.y===g){let b=a.x<c.x?-1:1,d=a.y<c.y?1:-1;return`L ${f+e*b},${g}Q ${f},${g} ${f},${g+e*d}`}let h=a.x<c.x?1:-1,i=a.y<c.y?-1:1;return`L ${f},${g+e*i}Q ${f},${g} ${f+e*h},${g}`}(k[c-1],b,k[c+1],g):`${0===c?"M":"L"}${b.x} ${b.y}`),""),l,m,n,o]}let cJ=(0,s.memo)(({sourceX:a,sourceY:b,targetX:c,targetY:d,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:i,labelBgBorderRadius:j,style:k,sourcePosition:l=p.Bottom,targetPosition:m=p.Top,markerEnd:n,markerStart:o,pathOptions:q,interactionWidth:r})=>{let[t,u,v]=cI({sourceX:a,sourceY:b,sourcePosition:l,targetX:c,targetY:d,targetPosition:m,borderRadius:q?.borderRadius,offset:q?.offset});return s.default.createElement(cy,{path:t,labelX:u,labelY:v,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:i,labelBgBorderRadius:j,style:k,markerEnd:n,markerStart:o,interactionWidth:r})});cJ.displayName="SmoothStepEdge";let cK=(0,s.memo)(a=>s.default.createElement(cJ,{...a,pathOptions:(0,s.useMemo)(()=>({borderRadius:0,offset:a.pathOptions?.offset}),[a.pathOptions?.offset])}));cK.displayName="StepEdge";let cL=(0,s.memo)(({sourceX:a,sourceY:b,targetX:c,targetY:d,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:i,labelBgBorderRadius:j,style:k,markerEnd:l,markerStart:m,interactionWidth:n})=>{let[o,p,q]=function({sourceX:a,sourceY:b,targetX:c,targetY:d}){let[e,f,g,h]=cA({sourceX:a,sourceY:b,targetX:c,targetY:d});return[`M ${a},${b}L ${c},${d}`,e,f,g,h]}({sourceX:a,sourceY:b,targetX:c,targetY:d});return s.default.createElement(cy,{path:o,labelX:p,labelY:q,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:i,labelBgBorderRadius:j,style:k,markerEnd:l,markerStart:m,interactionWidth:n})});function cM(a,b){return a>=0?.5*a:25*b*Math.sqrt(-a)}function cN({pos:a,x1:b,y1:c,x2:d,y2:e,c:f}){switch(a){case p.Left:return[b-cM(b-d,f),c];case p.Right:return[b+cM(d-b,f),c];case p.Top:return[b,c-cM(c-e,f)];case p.Bottom:return[b,c+cM(e-c,f)]}}function cO({sourceX:a,sourceY:b,sourcePosition:c=p.Bottom,targetX:d,targetY:e,targetPosition:f=p.Top,curvature:g=.25}){let[h,i]=cN({pos:c,x1:a,y1:b,x2:d,y2:e,c:g}),[j,k]=cN({pos:f,x1:d,y1:e,x2:a,y2:b,c:g}),[l,m,n,o]=cB({sourceX:a,sourceY:b,targetX:d,targetY:e,sourceControlX:h,sourceControlY:i,targetControlX:j,targetControlY:k});return[`M${a},${b} C${h},${i} ${j},${k} ${d},${e}`,l,m,n,o]}cL.displayName="StraightEdge";let cP=(0,s.memo)(({sourceX:a,sourceY:b,targetX:c,targetY:d,sourcePosition:e=p.Bottom,targetPosition:f=p.Top,label:g,labelStyle:h,labelShowBg:i,labelBgStyle:j,labelBgPadding:k,labelBgBorderRadius:l,style:m,markerEnd:n,markerStart:o,pathOptions:q,interactionWidth:r})=>{let[t,u,v]=cO({sourceX:a,sourceY:b,sourcePosition:e,targetX:c,targetY:d,targetPosition:f,curvature:q?.curvature});return s.default.createElement(cy,{path:t,labelX:u,labelY:v,label:g,labelStyle:h,labelShowBg:i,labelBgStyle:j,labelBgPadding:k,labelBgBorderRadius:l,style:m,markerEnd:n,markerStart:o,interactionWidth:r})});cP.displayName="BezierEdge";let cQ=(0,s.createContext)(null),cR=cQ.Provider;cQ.Consumer;let cS=(a,b)=>{if(void 0===a)return"";if("string"==typeof a)return a;let c=b?`${b}__`:"";return`${c}${Object.keys(a).sort().map(b=>`${b}=${a[b]}`).join("&")}`},cT=(a,b)=>{let c,d;return a.source&&a.target?(d=c="id"in a&&"source"in a&&"target"in a?{...a}:{...a,id:(({source:a,sourceHandle:b,target:c,targetHandle:d})=>`reactflow__edge-${a}${b||""}-${c}${d||""}`)(a)},b.some(a=>a.source===d.source&&a.target===d.target&&(a.sourceHandle===d.sourceHandle||!a.sourceHandle&&!d.sourceHandle)&&(a.targetHandle===d.targetHandle||!a.targetHandle&&!d.targetHandle)))?b:b.concat(c):(cu("006","Can't create edge. An edge needs a source and a target."),b)},cU=({x:a,y:b},[c,d,e],f,[g,h])=>{let i={x:(a-c)/e,y:(b-d)/e};return f?{x:g*Math.round(i.x/g),y:h*Math.round(i.y/h)}:i},cV=({x:a,y:b},[c,d,e])=>({x:a*e+c,y:b*e+d}),cW=(a,b=[0,0])=>{if(!a)return{x:0,y:0,positionAbsolute:{x:0,y:0}};let c=(a.width??0)*b[0],d=(a.height??0)*b[1],e={x:a.position.x-c,y:a.position.y-d};return{...e,positionAbsolute:a.positionAbsolute?{x:a.positionAbsolute.x-c,y:a.positionAbsolute.y-d}:e}},cX=(a,b=[0,0])=>0===a.length?{x:0,y:0,width:0,height:0}:(({x:a,y:b,x2:c,y2:d})=>({x:a,y:b,width:c-a,height:d-b}))(a.reduce((a,c)=>{let d,{x:e,y:f}=cW(c,b).positionAbsolute;return d=co({x:e,y:f,width:c.width||0,height:c.height||0}),{x:Math.min(a.x,d.x),y:Math.min(a.y,d.y),x2:Math.max(a.x2,d.x2),y2:Math.max(a.y2,d.y2)}},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})),cY=(a,b,[c,d,e]=[0,0,1],f=!1,g=!1,h=[0,0])=>{let i={x:(b.x-c)/e,y:(b.y-d)/e,width:b.width/e,height:b.height/e},j=[];return a.forEach(a=>{let{width:b,height:c,selectable:d=!0,hidden:e=!1}=a;if(g&&!d||e)return!1;let{positionAbsolute:k}=cW(a,h),l=cq(i,{x:k.x,y:k.y,width:b||0,height:c||0}),m=void 0===b||void 0===c||null===b||null===c,n=(b||0)*(c||0);(m||f&&l>0||l>=n||a.dragging)&&j.push(a)}),j},cZ=(a,b)=>{let c=a.map(a=>a.id);return b.filter(a=>c.includes(a.source)||c.includes(a.target))},c$=(a,b,c,d,e,f=.1)=>{let g=cj(Math.min(b/(a.width*(1+f)),c/(a.height*(1+f))),d,e);return{x:b/2-(a.x+a.width/2)*g,y:c/2-(a.y+a.height/2)*g,zoom:g}},c_=(a,b=0)=>a.transition().duration(b);function c0(a,b,c,d){return(b[c]||[]).reduce((b,e)=>(`${a.id}-${e.id}-${c}`!==d&&b.push({id:e.id||null,type:c,nodeId:a.id,x:(a.positionAbsolute?.x??0)+e.x+e.width/2,y:(a.positionAbsolute?.y??0)+e.y+e.height/2}),b),[])}let c1={source:null,target:null,sourceHandle:null,targetHandle:null},c2=()=>({handleDomNode:null,isValid:!1,connection:c1,endHandle:null});function c3(a,b,c,d,e,f,g){let h="target"===e,i=g.querySelector(`.react-flow__handle[data-id="${a?.nodeId}-${a?.id}-${a?.type}"]`),j={...c2(),handleDomNode:i};if(i){let a=c4(void 0,i),e=i.getAttribute("data-nodeid"),g=i.getAttribute("data-handleid"),l=i.classList.contains("connectable"),m=i.classList.contains("connectableend"),n={source:h?e:c,sourceHandle:h?g:d,target:h?c:e,targetHandle:h?d:g};j.connection=n,l&&m&&(b===k.Strict?h&&"source"===a||!h&&"target"===a:e!==c||g!==d)&&(j.endHandle={nodeId:e,handleId:g,type:a},j.isValid=f(n))}return j}function c4(a,b){return a?a:b?.classList.contains("target")?"target":b?.classList.contains("source")?"source":null}function c5(a){a?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function c6({event:a,handleId:b,nodeId:c,onConnect:d,isTarget:e,getState:f,setState:g,isValidConnection:h,edgeUpdaterType:i,onReconnectEnd:j}){let k,l,m=cn(a.target),{connectionMode:n,domNode:o,autoPanOnConnect:p,connectionRadius:q,onConnectStart:r,panBy:s,getNodes:t,cancelConnection:u}=f(),v=0,{x:w,y:x}=cw(a),y=c4(i,m?.elementFromPoint(w,x)),z=o?.getBoundingClientRect();if(!z||!y)return;let A=cw(a,z),B=!1,C=null,D=!1,E=null,F=function({nodes:a,nodeId:b,handleId:c,handleType:d}){return a.reduce((a,e)=>{if(e[cs]){let{handleBounds:f}=e[cs],g=[],h=[];f&&(g=c0(e,f,"source",`${b}-${c}-${d}`),h=c0(e,f,"target",`${b}-${c}-${d}`)),a.push(...g,...h)}return a},[])}({nodes:t(),nodeId:c,handleId:b,handleType:y}),G=()=>{if(!p)return;let[a,b]=cm(A,z);s({x:a,y:b}),v=requestAnimationFrame(G)};function H(a){var d,i;let j,{transform:o}=f();A=cw(a,z);let{handle:p,validHandleResult:r}=function(a,b,c,d,e,f){let{x:g,y:h}=cw(a),i=b.elementsFromPoint(g,h).find(a=>a.classList.contains("react-flow__handle"));if(i){let a=i.getAttribute("data-nodeid");if(a){let b=c4(void 0,i),d=i.getAttribute("data-handleid"),g=f({nodeId:a,id:d,type:b});if(g){let f=e.find(c=>c.nodeId===a&&c.type===b&&c.id===d);return{handle:{id:d,type:b,nodeId:a,x:f?.x||c.x,y:f?.y||c.y},validHandleResult:g}}}}let j=[],k=1/0;if(e.forEach(a=>{let b=Math.sqrt((a.x-c.x)**2+(a.y-c.y)**2);if(b<=d){let c=f(a);b<=k&&(b<k?j=[{handle:a,validHandleResult:c}]:b===k&&j.push({handle:a,validHandleResult:c}),k=b)}}),!j.length)return{handle:null,validHandleResult:c2()};if(1===j.length)return j[0];let l=j.some(({validHandleResult:a})=>a.isValid),m=j.some(({handle:a})=>"target"===a.type);return j.find(({handle:a,validHandleResult:b})=>m?"target"===a.type:!l||b.isValid)||j[0]}(a,m,cU(A,o,!1,[1,1]),q,F,a=>c3(a,n,c,b,e?"target":"source",h,m));if(k=p,B||(G(),B=!0),E=r.handleDomNode,C=r.connection,D=r.isValid,g({connectionPosition:k&&D?cV({x:k.x,y:k.y},o):A,connectionStatus:(d=!!k,j=null,(i=D)?j="valid":d&&!i&&(j="invalid"),j),connectionEndHandle:r.endHandle}),!k&&!D&&!E)return c5(l);C.source!==C.target&&E&&(c5(l),l=E,E.classList.add("connecting","react-flow__handle-connecting"),E.classList.toggle("valid",D),E.classList.toggle("react-flow__handle-valid",D))}function I(a){(k||E)&&C&&D&&d?.(C),f().onConnectEnd?.(a),i&&j?.(a),c5(l),u(),cancelAnimationFrame(v),B=!1,D=!1,C=null,E=null,m.removeEventListener("mousemove",H),m.removeEventListener("mouseup",I),m.removeEventListener("touchmove",H),m.removeEventListener("touchend",I)}g({connectionPosition:A,connectionStatus:null,connectionNodeId:c,connectionHandleId:b,connectionHandleType:y,connectionStartHandle:{nodeId:c,handleId:b,type:y},connectionEndHandle:null}),r?.(a,{nodeId:c,handleId:b,handleType:y}),m.addEventListener("mousemove",H),m.addEventListener("mouseup",I),m.addEventListener("touchmove",H),m.addEventListener("touchend",I)}let c7=()=>!0,c8=a=>({connectionStartHandle:a.connectionStartHandle,connectOnClick:a.connectOnClick,noPanClassName:a.noPanClassName}),c9=(0,s.forwardRef)(({type:a="source",position:b=p.Top,isValidConnection:c,isConnectable:d=!0,isConnectableStart:e=!0,isConnectableEnd:f=!0,id:g,onConnect:h,children:i,className:j,onMouseDown:k,onTouchStart:l,...m},n)=>{let o=g||null,q="target"===a,r=cd(),u=(0,s.useContext)(cQ),{connectOnClick:v,noPanClassName:w}=cc(c8,C),{connecting:x,clickConnecting:y}=cc(b=>{let{connectionStartHandle:c,connectionEndHandle:d,connectionClickStartHandle:e}=b;return{connecting:c?.nodeId===u&&c?.handleId===o&&c?.type===a||d?.nodeId===u&&d?.handleId===o&&d?.type===a,clickConnecting:e?.nodeId===u&&e?.handleId===o&&e?.type===a}},C);u||r.getState().onError?.("010","Handle: No node id found. Make sure to only use a Handle inside a custom Node.");let z=a=>{let{defaultEdgeOptions:b,onConnect:c,hasDefaultEdges:d}=r.getState(),e={...b,...a};if(d){let{edges:a,setEdges:b}=r.getState();b(cT(e,a))}c?.(e),h?.(e)},A=a=>{if(!u)return;let b="clientX"in a;e&&(b&&0===a.button||!b)&&c6({event:a,handleId:o,nodeId:u,onConnect:z,isTarget:q,getState:r.getState,setState:r.setState,isValidConnection:c||r.getState().isValidConnection||c7}),b?k?.(a):l?.(a)};return s.default.createElement("div",{"data-handleid":o,"data-nodeid":u,"data-handlepos":b,"data-id":`${u}-${o}-${a}`,className:t(["react-flow__handle",`react-flow__handle-${b}`,"nodrag",w,j,{source:!q,target:q,connectable:d,connectablestart:e,connectableend:f,connecting:y,connectionindicator:d&&(e&&!x||f&&x)}]),onMouseDown:A,onTouchStart:A,onClick:v?b=>{let{onClickConnectStart:d,onClickConnectEnd:f,connectionClickStartHandle:g,connectionMode:h,isValidConnection:i}=r.getState();if(!u||!g&&!e)return;if(!g){d?.(b,{nodeId:u,handleId:o,handleType:a}),r.setState({connectionClickStartHandle:{nodeId:u,type:a,handleId:o}});return}let j=cn(b.target),k=c||i||c7,{connection:l,isValid:m}=c3({nodeId:u,id:o,type:a},h,g.nodeId,g.handleId||null,g.type,k,j);m&&z(l),f?.(b),r.setState({connectionClickStartHandle:null})}:void 0,ref:n,...m},i)});c9.displayName="Handle";var da=(0,s.memo)(c9);let db=({data:a,isConnectable:b,targetPosition:c=p.Top,sourcePosition:d=p.Bottom})=>s.default.createElement(s.default.Fragment,null,s.default.createElement(da,{type:"target",position:c,isConnectable:b}),a?.label,s.default.createElement(da,{type:"source",position:d,isConnectable:b}));db.displayName="DefaultNode";var dc=(0,s.memo)(db);let dd=({data:a,isConnectable:b,sourcePosition:c=p.Bottom})=>s.default.createElement(s.default.Fragment,null,a?.label,s.default.createElement(da,{type:"source",position:c,isConnectable:b}));dd.displayName="InputNode";var de=(0,s.memo)(dd);let df=({data:a,isConnectable:b,targetPosition:c=p.Top})=>s.default.createElement(s.default.Fragment,null,s.default.createElement(da,{type:"target",position:c,isConnectable:b}),a?.label);df.displayName="OutputNode";var dg=(0,s.memo)(df);let dh=()=>null;dh.displayName="GroupNode";let di=a=>({selectedNodes:a.getNodes().filter(a=>a.selected),selectedEdges:a.edges.filter(a=>a.selected).map(a=>({...a}))}),dj=a=>a.id;function dk(a,b){return C(a.selectedNodes.map(dj),b.selectedNodes.map(dj))&&C(a.selectedEdges.map(dj),b.selectedEdges.map(dj))}let dl=(0,s.memo)(({onSelectionChange:a})=>{let b=cd(),{selectedNodes:c,selectedEdges:d}=cc(di,dk);return(0,s.useEffect)(()=>{let e={nodes:c,edges:d};a?.(e),b.getState().onSelectionChange.forEach(a=>a(e))},[c,d,a]),null});dl.displayName="SelectionListener";let dm=a=>!!a.onSelectionChange;function dn({onSelectionChange:a}){let b=cc(dm);return a||b?s.default.createElement(dl,{onSelectionChange:a}):null}let dp=a=>({setNodes:a.setNodes,setEdges:a.setEdges,setDefaultNodesAndEdges:a.setDefaultNodesAndEdges,setMinZoom:a.setMinZoom,setMaxZoom:a.setMaxZoom,setTranslateExtent:a.setTranslateExtent,setNodeExtent:a.setNodeExtent,reset:a.reset});function dq(a,b){(0,s.useEffect)(()=>{void 0!==a&&b(a)},[a])}function dr(a,b,c){(0,s.useEffect)(()=>{void 0!==b&&c({[a]:b})},[b])}let ds=({nodes:a,edges:b,defaultNodes:c,defaultEdges:d,onConnect:e,onConnectStart:f,onConnectEnd:g,onClickConnectStart:h,onClickConnectEnd:i,nodesDraggable:j,nodesConnectable:k,nodesFocusable:l,edgesFocusable:m,edgesUpdatable:n,elevateNodesOnSelect:o,minZoom:p,maxZoom:q,nodeExtent:r,onNodesChange:t,onEdgesChange:u,elementsSelectable:v,connectionMode:w,snapGrid:x,snapToGrid:y,translateExtent:z,connectOnClick:A,defaultEdgeOptions:B,fitView:D,fitViewOptions:E,onNodesDelete:F,onEdgesDelete:G,onNodeDrag:H,onNodeDragStart:I,onNodeDragStop:J,onSelectionDrag:K,onSelectionDragStart:L,onSelectionDragStop:M,noPanClassName:N,nodeOrigin:O,rfId:P,autoPanOnConnect:Q,autoPanOnNodeDrag:R,onError:S,connectionRadius:T,isValidConnection:U,nodeDragThreshold:V})=>{let{setNodes:W,setEdges:X,setDefaultNodesAndEdges:Y,setMinZoom:Z,setMaxZoom:$,setTranslateExtent:_,setNodeExtent:aa,reset:ab}=cc(dp,C),ac=cd();return(0,s.useEffect)(()=>(Y(c,d?.map(a=>({...a,...B}))),()=>{ab()}),[]),dr("defaultEdgeOptions",B,ac.setState),dr("connectionMode",w,ac.setState),dr("onConnect",e,ac.setState),dr("onConnectStart",f,ac.setState),dr("onConnectEnd",g,ac.setState),dr("onClickConnectStart",h,ac.setState),dr("onClickConnectEnd",i,ac.setState),dr("nodesDraggable",j,ac.setState),dr("nodesConnectable",k,ac.setState),dr("nodesFocusable",l,ac.setState),dr("edgesFocusable",m,ac.setState),dr("edgesUpdatable",n,ac.setState),dr("elementsSelectable",v,ac.setState),dr("elevateNodesOnSelect",o,ac.setState),dr("snapToGrid",y,ac.setState),dr("snapGrid",x,ac.setState),dr("onNodesChange",t,ac.setState),dr("onEdgesChange",u,ac.setState),dr("connectOnClick",A,ac.setState),dr("fitViewOnInit",D,ac.setState),dr("fitViewOnInitOptions",E,ac.setState),dr("onNodesDelete",F,ac.setState),dr("onEdgesDelete",G,ac.setState),dr("onNodeDrag",H,ac.setState),dr("onNodeDragStart",I,ac.setState),dr("onNodeDragStop",J,ac.setState),dr("onSelectionDrag",K,ac.setState),dr("onSelectionDragStart",L,ac.setState),dr("onSelectionDragStop",M,ac.setState),dr("noPanClassName",N,ac.setState),dr("nodeOrigin",O,ac.setState),dr("rfId",P,ac.setState),dr("autoPanOnConnect",Q,ac.setState),dr("autoPanOnNodeDrag",R,ac.setState),dr("onError",S,ac.setState),dr("connectionRadius",T,ac.setState),dr("isValidConnection",U,ac.setState),dr("nodeDragThreshold",V,ac.setState),dq(a,W),dq(b,X),dq(p,Z),dq(q,$),dq(z,_),dq(r,aa),null},dt={display:"none"},du={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},dv="react-flow__node-desc",dw="react-flow__edge-desc",dx=a=>a.ariaLiveMessage;function dy({rfId:a}){let b=cc(dx);return s.default.createElement("div",{id:`react-flow__aria-live-${a}`,"aria-live":"assertive","aria-atomic":"true",style:du},b)}function dz({rfId:a,disableKeyboardA11y:b}){return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{id:`${dv}-${a}`,style:dt},"Press enter or space to select a node.",!b&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),s.default.createElement("div",{id:`${dw}-${a}`,style:dt},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!b&&s.default.createElement(dy,{rfId:a}))}var dA=(a=null,b={actInsideInputWithModifier:!0})=>{let[c,d]=(0,s.useState)(!1),e=(0,s.useRef)(!1),f=(0,s.useRef)(new Set([])),[g,h]=(0,s.useMemo)(()=>{if(null!==a){let b=(Array.isArray(a)?a:[a]).filter(a=>"string"==typeof a).map(a=>a.split("+")),c=b.reduce((a,b)=>a.concat(...b),[]);return[b,c]}return[[],[]]},[a]);return(0,s.useEffect)(()=>{let c="undefined"!=typeof document?document:null,i=b?.target||c;if(null!==a){let a=a=>{if(e.current=a.ctrlKey||a.metaKey||a.shiftKey,(!e.current||e.current&&!b.actInsideInputWithModifier)&&cv(a))return!1;let c=dC(a.code,h);f.current.add(a[c]),dB(g,f.current,!1)&&(a.preventDefault(),d(!0))},c=a=>{if((!e.current||e.current&&!b.actInsideInputWithModifier)&&cv(a))return!1;let c=dC(a.code,h);dB(g,f.current,!0)?(d(!1),f.current.clear()):f.current.delete(a[c]),"Meta"===a.key&&f.current.clear(),e.current=!1},j=()=>{f.current.clear(),d(!1)};return i?.addEventListener("keydown",a),i?.addEventListener("keyup",c),window.addEventListener("blur",j),()=>{i?.removeEventListener("keydown",a),i?.removeEventListener("keyup",c),window.removeEventListener("blur",j)}}},[a,d]),c};function dB(a,b,c){return a.filter(a=>c||a.length===b.size).some(a=>a.every(a=>b.has(a)))}function dC(a,b){return b.includes(a)?"code":"key"}function dD(a,b,c){a.forEach(d=>{let e=d.parentNode||d.parentId;if(e&&!a.has(e))throw Error(`Parent node ${e} not found`);if(e||c?.[d.id]){let{x:e,y:f,z:g}=function a(b,c,d,e){let f=b.parentNode||b.parentId;if(!f)return d;let g=c.get(f),h=cW(g,e);return a(g,c,{x:(d.x??0)+h.x,y:(d.y??0)+h.y,z:(g[cs]?.z??0)>(d.z??0)?g[cs]?.z??0:d.z??0},e)}(d,a,{...d.position,z:d[cs]?.z??0},b);d.positionAbsolute={x:e,y:f},d[cs].z=g,c?.[d.id]&&(d[cs].isParent=!0)}})}function dE(a,b,c,d){let e=new Map,f={},g=1e3*!!d;return a.forEach(a=>{let c=(cr(a.zIndex)?a.zIndex:0)+(a.selected?g:0),d=b.get(a.id),h={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},i=a.parentNode||a.parentId;i&&(f[i]=!0),Object.defineProperty(h,cs,{enumerable:!1,value:{handleBounds:d?.type&&d?.type!==a.type?void 0:d?.[cs]?.handleBounds,z:c}}),e.set(a.id,h)}),dD(e,c,f),e}function dF(a,b={}){let{getNodes:c,width:d,height:e,minZoom:f,maxZoom:g,d3Zoom:h,d3Selection:i,fitViewOnInitDone:j,fitViewOnInit:k,nodeOrigin:l}=a(),m=b.initial&&!j&&k;if(h&&i&&(m||!b.initial)){let a=c().filter(a=>{let c=b.includeHiddenNodes?a.width&&a.height:!a.hidden;return b.nodes?.length?c&&b.nodes.some(b=>b.id===a.id):c}),j=a.every(a=>a.width&&a.height);if(a.length>0&&j){let{x:c,y:j,zoom:k}=c$(cX(a,l),d,e,b.minZoom??f,b.maxZoom??g,b.padding??.1),m=bW.translate(c,j).scale(k);return"number"==typeof b.duration&&b.duration>0?h.transform(c_(i,b.duration),m):h.transform(i,m),!0}}return!1}function dG({changedNodes:a,changedEdges:b,get:c,set:d}){let{nodeInternals:e,edges:f,onNodesChange:g,onEdgesChange:h,hasDefaultNodes:i,hasDefaultEdges:j}=c();a?.length&&(i&&d({nodeInternals:(a.forEach(a=>{let b=e.get(a.id);b&&e.set(b.id,{...b,[cs]:b[cs],selected:a.selected})}),new Map(e))}),g?.(a)),b?.length&&(j&&d({edges:f.map(a=>{let c=b.find(b=>b.id===a.id);return c&&(a.selected=c.selected),a})}),h?.(b))}let dH=()=>{},dI={zoomIn:dH,zoomOut:dH,zoomTo:dH,getZoom:()=>1,setViewport:dH,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:dH,fitBounds:dH,project:a=>a,screenToFlowPosition:a=>a,flowToScreenPosition:a=>a,viewportInitialized:!1},dJ=a=>({d3Zoom:a.d3Zoom,d3Selection:a.d3Selection});function dK(){let a=(()=>{let a=cd(),{d3Zoom:b,d3Selection:c}=cc(dJ,C);return(0,s.useMemo)(()=>c&&b?{zoomIn:a=>b.scaleBy(c_(c,a?.duration),1.2),zoomOut:a=>b.scaleBy(c_(c,a?.duration),1/1.2),zoomTo:(a,d)=>b.scaleTo(c_(c,d?.duration),a),getZoom:()=>a.getState().transform[2],setViewport:(d,e)=>{let[f,g,h]=a.getState().transform,i=bW.translate(d.x??f,d.y??g).scale(d.zoom??h);b.transform(c_(c,e?.duration),i)},getViewport:()=>{let[b,c,d]=a.getState().transform;return{x:b,y:c,zoom:d}},fitView:b=>dF(a.getState,b),setCenter:(d,e,f)=>{let{width:g,height:h,maxZoom:i}=a.getState(),j=void 0!==f?.zoom?f.zoom:i,k=g/2-d*j,l=h/2-e*j,m=bW.translate(k,l).scale(j);b.transform(c_(c,f?.duration),m)},fitBounds:(d,e)=>{let{width:f,height:g,minZoom:h,maxZoom:i}=a.getState(),{x:j,y:k,zoom:l}=c$(d,f,g,h,i,e?.padding??.1),m=bW.translate(j,k).scale(l);b.transform(c_(c,e?.duration),m)},project:b=>{let{transform:c,snapToGrid:d,snapGrid:e}=a.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),cU(b,c,d,e)},screenToFlowPosition:b=>{let{transform:c,snapToGrid:d,snapGrid:e,domNode:f}=a.getState();if(!f)return b;let{x:g,y:h}=f.getBoundingClientRect();return cU({x:b.x-g,y:b.y-h},c,d,e)},flowToScreenPosition:b=>{let{transform:c,domNode:d}=a.getState();if(!d)return b;let{x:e,y:f}=d.getBoundingClientRect(),g=cV(b,c);return{x:g.x+e,y:g.y+f}},viewportInitialized:!0}:dI,[b,c])})(),b=cd(),c=(0,s.useCallback)(()=>b.getState().getNodes().map(a=>({...a})),[]),d=(0,s.useCallback)(a=>b.getState().nodeInternals.get(a),[]),e=(0,s.useCallback)(()=>{let{edges:a=[]}=b.getState();return a.map(a=>({...a}))},[]),f=(0,s.useCallback)(a=>{let{edges:c=[]}=b.getState();return c.find(b=>b.id===a)},[]),g=(0,s.useCallback)(a=>{let{getNodes:c,setNodes:d,hasDefaultNodes:e,onNodesChange:f}=b.getState(),g=c(),h="function"==typeof a?a(g):a;e?d(h):f&&f(0===h.length?g.map(a=>({type:"remove",id:a.id})):h.map(a=>({item:a,type:"reset"})))},[]),h=(0,s.useCallback)(a=>{let{edges:c=[],setEdges:d,hasDefaultEdges:e,onEdgesChange:f}=b.getState(),g="function"==typeof a?a(c):a;e?d(g):f&&f(0===g.length?c.map(a=>({type:"remove",id:a.id})):g.map(a=>({item:a,type:"reset"})))},[]),i=(0,s.useCallback)(a=>{let c=Array.isArray(a)?a:[a],{getNodes:d,setNodes:e,hasDefaultNodes:f,onNodesChange:g}=b.getState();f?e([...d(),...c]):g&&g(c.map(a=>({item:a,type:"add"})))},[]),j=(0,s.useCallback)(a=>{let c=Array.isArray(a)?a:[a],{edges:d=[],setEdges:e,hasDefaultEdges:f,onEdgesChange:g}=b.getState();f?e([...d,...c]):g&&g(c.map(a=>({item:a,type:"add"})))},[]),k=(0,s.useCallback)(()=>{let{getNodes:a,edges:c=[],transform:d}=b.getState(),[e,f,g]=d;return{nodes:a().map(a=>({...a})),edges:c.map(a=>({...a})),viewport:{x:e,y:f,zoom:g}}},[]),l=(0,s.useCallback)(({nodes:a,edges:c})=>{let{nodeInternals:d,getNodes:e,edges:f,hasDefaultNodes:g,hasDefaultEdges:h,onNodesDelete:i,onEdgesDelete:j,onNodesChange:k,onEdgesChange:l}=b.getState(),m=(a||[]).map(a=>a.id),n=(c||[]).map(a=>a.id),o=e().reduce((a,b)=>{let c=b.parentNode||b.parentId,d=!m.includes(b.id)&&c&&a.find(a=>a.id===c);return("boolean"!=typeof b.deletable||b.deletable)&&(m.includes(b.id)||d)&&a.push(b),a},[]),p=f.filter(a=>"boolean"!=typeof a.deletable||a.deletable),q=p.filter(a=>n.includes(a.id));if(o||q){let a=[...q,...cZ(o,p)],c=a.reduce((a,b)=>(a.includes(b.id)||a.push(b.id),a),[]);(h||g)&&(h&&b.setState({edges:f.filter(a=>!c.includes(a.id))}),g&&(o.forEach(a=>{d.delete(a.id)}),b.setState({nodeInternals:new Map(d)}))),c.length>0&&(j?.(a),l&&l(c.map(a=>({id:a,type:"remove"})))),o.length>0&&(i?.(o),k&&k(o.map(a=>({id:a.id,type:"remove"}))))}},[]),m=(0,s.useCallback)(a=>{let c=cr(a.width)&&cr(a.height)&&cr(a.x)&&cr(a.y),d=c?null:b.getState().nodeInternals.get(a.id);return c||d?[c?a:cp(d),d,c]:[null,null,c]},[]),n=(0,s.useCallback)((a,c=!0,d)=>{let[e,f,g]=m(a);return e?(d||b.getState().getNodes()).filter(a=>{if(!g&&(a.id===f.id||!a.positionAbsolute))return!1;let b=cq(cp(a),e);return c&&b>0||b>=e.width*e.height}):[]},[]),o=(0,s.useCallback)((a,b,c=!0)=>{let[d]=m(a);if(!d)return!1;let e=cq(d,b);return c&&e>0||e>=d.width*d.height},[]);return(0,s.useMemo)(()=>({...a,getNodes:c,getNode:d,getEdges:e,getEdge:f,setNodes:g,setEdges:h,addNodes:i,addEdges:j,toObject:k,deleteElements:l,getIntersectingNodes:n,isNodeIntersecting:o}),[a,c,d,e,f,g,h,i,j,k,l,n,o])}let dL={actInsideInputWithModifier:!1},dM={position:"absolute",width:"100%",height:"100%",top:0,left:0},dN=a=>({x:a.x,y:a.y,zoom:a.k}),dO=(a,b)=>a.target.closest(`.${b}`),dP=(a,b)=>2===b&&Array.isArray(a)&&a.includes(2),dQ=a=>{let b=a.ctrlKey&&cx()?10:1;return-a.deltaY*(1===a.deltaMode?.05:a.deltaMode?1:.002)*b},dR=a=>({d3Zoom:a.d3Zoom,d3Selection:a.d3Selection,d3ZoomHandler:a.d3ZoomHandler,userSelectionActive:a.userSelectionActive}),dS=({onMove:a,onMoveStart:b,onMoveEnd:c,onPaneContextMenu:d,zoomOnScroll:e=!0,zoomOnPinch:f=!0,panOnScroll:g=!1,panOnScrollSpeed:h=.5,panOnScrollMode:i=l.Free,zoomOnDoubleClick:j=!0,elementsSelectable:k,panOnDrag:m=!0,defaultViewport:n,translateExtent:o,minZoom:p,maxZoom:q,zoomActivationKeyCode:r,preventScrolling:t=!0,children:u,noWheelClassName:v,noPanClassName:w})=>{let x,y=(0,s.useRef)(),z=cd(),A=(0,s.useRef)(!1),B=(0,s.useRef)(!1),D=(0,s.useRef)(null),F=(0,s.useRef)({x:0,y:0,zoom:0}),{d3Zoom:G,d3Selection:H,d3ZoomHandler:I,userSelectionActive:J}=cc(dR,C),K=dA(r),L=(0,s.useRef)(0),M=(0,s.useRef)(!1),N=(0,s.useRef)();return x=cd(),(0,s.useEffect)(()=>{let a,b=()=>{if(!D.current)return;let a=ci(D.current);(0===a.height||0===a.width)&&x.getState().onError?.("004","The React Flow parent container needs a width and a height to render the graph."),x.setState({width:a.width||500,height:a.height||500})};return b(),window.addEventListener("resize",b),D.current&&(a=new ResizeObserver(()=>b())).observe(D.current),()=>{window.removeEventListener("resize",b),a&&D.current&&a.unobserve(D.current)}},[]),(0,s.useEffect)(()=>{if(D.current){let a=D.current.getBoundingClientRect(),b=(function(){var a,b,c,d=bZ,e=b$,f=b2,g=b0,h=b1,i=[0,1/0],j=[[-1/0,-1/0],[1/0,1/0]],k=250,l=aC,m=E("start","zoom","end"),n=0,o=10;function p(a){a.property("__zoom",b_).on("wheel.zoom",w,{passive:!1}).on("mousedown.zoom",x).on("dblclick.zoom",y).filter(h).on("touchstart.zoom",z).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function q(a,b){return(b=Math.max(i[0],Math.min(i[1],b)))===a.k?a:new bV(b,a.x,a.y)}function r(a,b,c){var d=b[0]-c[0]*a.k,e=b[1]-c[1]*a.k;return d===a.x&&e===a.y?a:new bV(a.k,d,e)}function s(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function t(a,b,c,d){a.on("start.zoom",function(){u(this,arguments).event(d).start()}).on("interrupt.zoom end.zoom",function(){u(this,arguments).event(d).end()}).tween("zoom",function(){var a=arguments,f=u(this,a).event(d),g=e.apply(this,a),h=null==c?s(g):"function"==typeof c?c.apply(this,a):c,i=Math.max(g[1][0]-g[0][0],g[1][1]-g[0][1]),j=this.__zoom,k="function"==typeof b?b.apply(this,a):b,m=l(j.invert(h).concat(i/j.k),k.invert(h).concat(i/k.k));return function(a){if(1===a)a=k;else{var b=m(a),c=i/b[2];a=new bV(c,h[0]-b[0]*c,h[1]-b[1]*c)}f.zoom(null,a)}})}function u(a,b,c){return!c&&a.__zooming||new v(a,b)}function v(a,b){this.that=a,this.args=b,this.active=0,this.sourceEvent=null,this.extent=e.apply(a,b),this.taps=0}function w(a,...b){if(d.apply(this,arguments)){var c=u(this,b).event(a),e=this.__zoom,h=Math.max(i[0],Math.min(i[1],e.k*Math.pow(2,g.apply(this,arguments)))),k=aD(a);if(c.wheel)(c.mouse[0][0]!==k[0]||c.mouse[0][1]!==k[1])&&(c.mouse[1]=e.invert(c.mouse[0]=k)),clearTimeout(c.wheel);else{if(e.k===h)return;c.mouse=[k,e.invert(k)],a0(this),c.start()}bY(a),c.wheel=setTimeout(function(){c.wheel=null,c.end()},150),c.zoom("mouse",f(r(q(e,h),c.mouse[0],c.mouse[1]),c.extent,j))}}function x(a,...b){if(!c&&d.apply(this,arguments)){var e=a.currentTarget,g=u(this,b,!0).event(a),h=au(a.view).on("mousemove.zoom",function(a){if(bY(a),!g.moved){var b=a.clientX-k,c=a.clientY-l;g.moved=b*b+c*c>n}g.event(a).zoom("mouse",f(r(g.that.__zoom,g.mouse[0]=aD(a,e),g.mouse[1]),g.extent,j))},!0).on("mouseup.zoom",function(a){h.on("mousemove.zoom mouseup.zoom",null),aA(a.view,g.moved),bY(a),g.event(a).end()},!0),i=aD(a,e),k=a.clientX,l=a.clientY;az(a.view),bX(a),g.mouse=[i,this.__zoom.invert(i)],a0(this),g.start()}}function y(a,...b){if(d.apply(this,arguments)){var c=this.__zoom,g=aD(a.changedTouches?a.changedTouches[0]:a,this),h=c.invert(g),i=c.k*(a.shiftKey?.5:2),l=f(r(q(c,i),g,h),e.apply(this,b),j);bY(a),k>0?au(this).transition().duration(k).call(t,l,g,a):au(this).call(p.transform,l,g,a)}}function z(c,...e){if(d.apply(this,arguments)){var f,g,h,i,j=c.touches,k=j.length,l=u(this,e,c.changedTouches.length===k).event(c);for(bX(c),g=0;g<k;++g)i=[i=aD(h=j[g],this),this.__zoom.invert(i),h.identifier],l.touch0?l.touch1||l.touch0[2]===i[2]||(l.touch1=i,l.taps=0):(l.touch0=i,f=!0,l.taps=1+!!a);a&&(a=clearTimeout(a)),f&&(l.taps<2&&(b=i[0],a=setTimeout(function(){a=null},500)),a0(this),l.start())}}function A(a,...b){if(this.__zooming){var c,d,e,g,h=u(this,b).event(a),i=a.changedTouches,k=i.length;for(bY(a),c=0;c<k;++c)e=aD(d=i[c],this),h.touch0&&h.touch0[2]===d.identifier?h.touch0[0]=e:h.touch1&&h.touch1[2]===d.identifier&&(h.touch1[0]=e);if(d=h.that.__zoom,h.touch1){var l=h.touch0[0],m=h.touch0[1],n=h.touch1[0],o=h.touch1[1],p=(p=n[0]-l[0])*p+(p=n[1]-l[1])*p,s=(s=o[0]-m[0])*s+(s=o[1]-m[1])*s;d=q(d,Math.sqrt(p/s)),e=[(l[0]+n[0])/2,(l[1]+n[1])/2],g=[(m[0]+o[0])/2,(m[1]+o[1])/2]}else{if(!h.touch0)return;e=h.touch0[0],g=h.touch0[1]}h.zoom("touch",f(r(d,e,g),h.extent,j))}}function B(a,...d){if(this.__zooming){var e,f,g=u(this,d).event(a),h=a.changedTouches,i=h.length;for(bX(a),c&&clearTimeout(c),c=setTimeout(function(){c=null},500),e=0;e<i;++e)f=h[e],g.touch0&&g.touch0[2]===f.identifier?delete g.touch0:g.touch1&&g.touch1[2]===f.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),2===g.taps&&(f=aD(f,this),Math.hypot(b[0]-f[0],b[1]-f[1])<o)){var j=au(this).on("dblclick.zoom");j&&j.apply(this,arguments)}}}return p.transform=function(a,b,c,d){var e=a.selection?a.selection():a;e.property("__zoom",b_),a!==e?t(a,b,c,d):e.interrupt().each(function(){u(this,arguments).event(d).start().zoom(null,"function"==typeof b?b.apply(this,arguments):b).end()})},p.scaleBy=function(a,b,c,d){p.scaleTo(a,function(){var a=this.__zoom.k,c="function"==typeof b?b.apply(this,arguments):b;return a*c},c,d)},p.scaleTo=function(a,b,c,d){p.transform(a,function(){var a=e.apply(this,arguments),d=this.__zoom,g=null==c?s(a):"function"==typeof c?c.apply(this,arguments):c,h=d.invert(g),i="function"==typeof b?b.apply(this,arguments):b;return f(r(q(d,i),g,h),a,j)},c,d)},p.translateBy=function(a,b,c,d){p.transform(a,function(){return f(this.__zoom.translate("function"==typeof b?b.apply(this,arguments):b,"function"==typeof c?c.apply(this,arguments):c),e.apply(this,arguments),j)},null,d)},p.translateTo=function(a,b,c,d,g){p.transform(a,function(){var a=e.apply(this,arguments),g=this.__zoom,h=null==d?s(a):"function"==typeof d?d.apply(this,arguments):d;return f(bW.translate(h[0],h[1]).scale(g.k).translate("function"==typeof b?-b.apply(this,arguments):-b,"function"==typeof c?-c.apply(this,arguments):-c),a,j)},d,g)},v.prototype={event:function(a){return a&&(this.sourceEvent=a),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(a,b){return this.mouse&&"mouse"!==a&&(this.mouse[1]=b.invert(this.mouse[0])),this.touch0&&"touch"!==a&&(this.touch0[1]=b.invert(this.touch0[0])),this.touch1&&"touch"!==a&&(this.touch1[1]=b.invert(this.touch1[0])),this.that.__zoom=b,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(a){var b=au(this.that).datum();m.call(a,this.that,new bU(a,{sourceEvent:this.sourceEvent,target:p,type:a,transform:this.that.__zoom,dispatch:m}),b)}},p.wheelDelta=function(a){return arguments.length?(g="function"==typeof a?a:bT(+a),p):g},p.filter=function(a){return arguments.length?(d="function"==typeof a?a:bT(!!a),p):d},p.touchable=function(a){return arguments.length?(h="function"==typeof a?a:bT(!!a),p):h},p.extent=function(a){return arguments.length?(e="function"==typeof a?a:bT([[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]]),p):e},p.scaleExtent=function(a){return arguments.length?(i[0]=+a[0],i[1]=+a[1],p):[i[0],i[1]]},p.translateExtent=function(a){return arguments.length?(j[0][0]=+a[0][0],j[1][0]=+a[1][0],j[0][1]=+a[0][1],j[1][1]=+a[1][1],p):[[j[0][0],j[0][1]],[j[1][0],j[1][1]]]},p.constrain=function(a){return arguments.length?(f=a,p):f},p.duration=function(a){return arguments.length?(k=+a,p):k},p.interpolate=function(a){return arguments.length?(l=a,p):l},p.on=function(){var a=m.on.apply(m,arguments);return a===m?p:a},p.clickDistance=function(a){return arguments.length?(n=(a*=1)*a,p):Math.sqrt(n)},p.tapDistance=function(a){return arguments.length?(o=+a,p):o},p})().scaleExtent([p,q]).translateExtent(o),c=au(D.current).call(b),d=bW.translate(n.x,n.y).scale(cj(n.zoom,p,q)),e=[[0,0],[a.width,a.height]],f=b.constrain()(d,e,o);b.transform(c,f),b.wheelDelta(dQ),z.setState({d3Zoom:b,d3Selection:c,d3ZoomHandler:c.on("wheel.zoom"),transform:[f.x,f.y,f.k],domNode:D.current.closest(".react-flow")})}},[]),(0,s.useEffect)(()=>{H&&G&&(!g||K||J?void 0!==I&&H.on("wheel.zoom",function(a,b){if(!t&&"wheel"===a.type&&!a.ctrlKey||dO(a,v))return null;a.preventDefault(),I.call(this,a,b)},{passive:!1}):H.on("wheel.zoom",d=>{if(dO(d,v))return!1;d.preventDefault(),d.stopImmediatePropagation();let e=H.property("__zoom").k||1;if(d.ctrlKey&&f){let a=aD(d),b=e*Math.pow(2,dQ(d));G.scaleTo(H,b,a,d);return}let g=1===d.deltaMode?20:1,j=i===l.Vertical?0:d.deltaX*g,k=i===l.Horizontal?0:d.deltaY*g;!cx()&&d.shiftKey&&i!==l.Vertical&&(j=d.deltaY*g,k=0),G.translateBy(H,-(j/e)*h,-(k/e)*h,{internal:!0});let m=dN(H.property("__zoom")),{onViewportChangeStart:n,onViewportChange:o,onViewportChangeEnd:p}=z.getState();clearTimeout(N.current),M.current||(M.current=!0,b?.(d,m),n?.(m)),M.current&&(a?.(d,m),o?.(m),N.current=setTimeout(()=>{c?.(d,m),p?.(m),M.current=!1},150))},{passive:!1}))},[J,g,i,H,G,I,K,f,t,v,b,a,c]),(0,s.useEffect)(()=>{G&&G.on("start",a=>{if(!a.sourceEvent||a.sourceEvent.internal)return null;L.current=a.sourceEvent?.button;let{onViewportChangeStart:c}=z.getState(),d=dN(a.transform);A.current=!0,F.current=d,a.sourceEvent?.type==="mousedown"&&z.setState({paneDragging:!0}),c?.(d),b?.(a.sourceEvent,d)})},[G,b]),(0,s.useEffect)(()=>{G&&(J&&!A.current?G.on("zoom",null):J||G.on("zoom",b=>{let{onViewportChange:c}=z.getState();if(z.setState({transform:[b.transform.x,b.transform.y,b.transform.k]}),B.current=!!(d&&dP(m,L.current??0)),(a||c)&&!b.sourceEvent?.internal){let d=dN(b.transform);c?.(d),a?.(b.sourceEvent,d)}}))},[J,G,a,m,d]),(0,s.useEffect)(()=>{G&&G.on("end",a=>{let b,e;if(!a.sourceEvent||a.sourceEvent.internal)return null;let{onViewportChangeEnd:f}=z.getState();if(A.current=!1,z.setState({paneDragging:!1}),d&&dP(m,L.current??0)&&!B.current&&d(a.sourceEvent),B.current=!1,(c||f)&&(b=F.current,e=a.transform,b.x!==e.x||b.y!==e.y||b.zoom!==e.k)){let b=dN(a.transform);F.current=b,clearTimeout(y.current),y.current=setTimeout(()=>{f?.(b),c?.(a.sourceEvent,b)},150*!!g)}})},[G,g,m,c,d]),(0,s.useEffect)(()=>{G&&G.filter(a=>{let b=K||e,c=f&&a.ctrlKey;if((!0===m||Array.isArray(m)&&m.includes(1))&&1===a.button&&"mousedown"===a.type&&(dO(a,"react-flow__node")||dO(a,"react-flow__edge")))return!0;if(!m&&!b&&!g&&!j&&!f||J||!j&&"dblclick"===a.type||dO(a,v)&&"wheel"===a.type||dO(a,w)&&("wheel"!==a.type||g&&"wheel"===a.type&&!K)||!f&&a.ctrlKey&&"wheel"===a.type||!b&&!g&&!c&&"wheel"===a.type||!m&&("mousedown"===a.type||"touchstart"===a.type)||Array.isArray(m)&&!m.includes(a.button)&&"mousedown"===a.type)return!1;let d=Array.isArray(m)&&m.includes(a.button)||!a.button||a.button<=1;return(!a.ctrlKey||"wheel"===a.type)&&d})},[J,G,e,f,g,j,m,k,K]),s.default.createElement("div",{className:"react-flow__renderer",ref:D,style:dM},u)},dT=a=>({userSelectionActive:a.userSelectionActive,userSelectionRect:a.userSelectionRect});function dU(){let{userSelectionActive:a,userSelectionRect:b}=cc(dT,C);return a&&b?s.default.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:b.width,height:b.height,transform:`translate(${b.x}px, ${b.y}px)`}}):null}function dV(a,b){let c=b.parentNode||b.parentId,d=a.find(a=>a.id===c);if(d){let a=b.position.x+b.width-d.width,c=b.position.y+b.height-d.height;if(a>0||c>0||b.position.x<0||b.position.y<0){if(d.style={...d.style},d.style.width=d.style.width??d.width,d.style.height=d.style.height??d.height,a>0&&(d.style.width+=a),c>0&&(d.style.height+=c),b.position.x<0){let a=Math.abs(b.position.x);d.position.x=d.position.x-a,d.style.width+=a,b.position.x=0}if(b.position.y<0){let a=Math.abs(b.position.y);d.position.y=d.position.y-a,d.style.height+=a,b.position.y=0}d.width=d.style.width,d.height=d.style.height}}}function dW(a,b){if(a.some(a=>"reset"===a.type))return a.filter(a=>"reset"===a.type).map(a=>a.item);let c=a.filter(a=>"add"===a.type).map(a=>a.item);return b.reduce((b,c)=>{let d=a.filter(a=>a.id===c.id);if(0===d.length)return b.push(c),b;let e={...c};for(let a of d)if(a)switch(a.type){case"select":e.selected=a.selected;break;case"position":void 0!==a.position&&(e.position=a.position),void 0!==a.positionAbsolute&&(e.positionAbsolute=a.positionAbsolute),void 0!==a.dragging&&(e.dragging=a.dragging),e.expandParent&&dV(b,e);break;case"dimensions":void 0!==a.dimensions&&(e.width=a.dimensions.width,e.height=a.dimensions.height),void 0!==a.updateStyle&&(e.style={...e.style||{},...a.dimensions}),"boolean"==typeof a.resizing&&(e.resizing=a.resizing),e.expandParent&&dV(b,e);break;case"remove":return b}return b.push(e),b},c)}function dX(a,b){return dW(a,b)}function dY(a,b){return dW(a,b)}let dZ=(a,b)=>({id:a,type:"select",selected:b});function d$(a,b){return a.reduce((a,c)=>{let d=b.includes(c.id);return!c.selected&&d?(c.selected=!0,a.push(dZ(c.id,!0))):c.selected&&!d&&(c.selected=!1,a.push(dZ(c.id,!1))),a},[])}let d_=(a,b)=>c=>{c.target===b.current&&a?.(c)},d0=a=>({userSelectionActive:a.userSelectionActive,elementsSelectable:a.elementsSelectable,dragging:a.paneDragging}),d1=(0,s.memo)(({isSelecting:a,selectionMode:b=m.Full,panOnDrag:c,onSelectionStart:d,onSelectionEnd:e,onPaneClick:f,onPaneContextMenu:g,onPaneScroll:h,onPaneMouseEnter:i,onPaneMouseMove:j,onPaneMouseLeave:k,children:l})=>{let n=(0,s.useRef)(null),o=cd(),p=(0,s.useRef)(0),q=(0,s.useRef)(0),r=(0,s.useRef)(),{userSelectionActive:u,elementsSelectable:v,dragging:w}=cc(d0,C),x=()=>{o.setState({userSelectionActive:!1,userSelectionRect:null}),p.current=0,q.current=0},y=a=>{f?.(a),o.getState().resetSelectedElements(),o.setState({nodesSelectionActive:!1})},z=v&&(a||u);return s.default.createElement("div",{className:t(["react-flow__pane",{dragging:w,selection:a}]),onClick:z?void 0:d_(y,n),onContextMenu:d_(a=>{Array.isArray(c)&&c?.includes(2)?a.preventDefault():g?.(a)},n),onWheel:d_(h?a=>h(a):void 0,n),onMouseEnter:z?void 0:i,onMouseDown:z?b=>{let{resetSelectedElements:c,domNode:e}=o.getState();if(r.current=e?.getBoundingClientRect(),!v||!a||0!==b.button||b.target!==n.current||!r.current)return;let{x:f,y:g}=cw(b,r.current);c(),o.setState({userSelectionRect:{width:0,height:0,startX:f,startY:g,x:f,y:g}}),d?.(b)}:void 0,onMouseMove:z?c=>{let{userSelectionRect:d,nodeInternals:e,edges:f,transform:g,onNodesChange:h,onEdgesChange:i,nodeOrigin:j,getNodes:k}=o.getState();if(!a||!r.current||!d)return;o.setState({userSelectionActive:!0,nodesSelectionActive:!1});let l=cw(c,r.current),n=d.startX??0,s=d.startY??0,t={...d,x:l.x<n?l.x:n,y:l.y<s?l.y:s,width:Math.abs(l.x-n),height:Math.abs(l.y-s)},u=k(),v=cY(e,t,g,b===m.Partial,!0,j),w=cZ(v,f).map(a=>a.id),x=v.map(a=>a.id);if(p.current!==x.length){p.current=x.length;let a=d$(u,x);a.length&&h?.(a)}if(q.current!==w.length){q.current=w.length;let a=d$(f,w);a.length&&i?.(a)}o.setState({userSelectionRect:t})}:j,onMouseUp:z?a=>{if(0!==a.button)return;let{userSelectionRect:b}=o.getState();!u&&b&&a.target===n.current&&y?.(a),o.setState({nodesSelectionActive:p.current>0}),x(),e?.(a)}:void 0,onMouseLeave:z?a=>{u&&(o.setState({nodesSelectionActive:p.current>0}),e?.(a)),x()}:k,ref:n,style:dM},l,s.default.createElement(dU,null))});function d2(a,b,c){let d=a;do{if(d?.matches(b))return!0;if(d===c.current)break;d=d.parentElement}while(d)return!1}function d3(a,b,c,d,e=[0,0],f){var g;let h=(g=a.extent||d)&&"parent"!==g?[g[0],[g[1][0]-(a.width||0),g[1][1]-(a.height||0)]]:g,i=h,j=a.parentNode||a.parentId;if("parent"!==a.extent||a.expandParent){if(a.extent&&j&&"parent"!==a.extent){let{x:b,y:d}=cW(c.get(j),e).positionAbsolute;i=[[a.extent[0][0]+b,a.extent[0][1]+d],[a.extent[1][0]+b,a.extent[1][1]+d]]}}else if(j&&a.width&&a.height){let b=c.get(j),{x:d,y:f}=cW(b,e).positionAbsolute;i=b&&cr(d)&&cr(f)&&cr(b.width)&&cr(b.height)?[[d+a.width*e[0],f+a.height*e[1]],[d+b.width-a.width+a.width*e[0],f+b.height-a.height+a.height*e[1]]]:i}else f?.("005","Only child nodes can use a parent extent."),i=h;let k={x:0,y:0};j&&(k=cW(c.get(j),e).positionAbsolute);let l=i&&"parent"!==i?ck(b,i):b;return{position:{x:l.x-k.x,y:l.y-k.y},positionAbsolute:l}}function d4({nodeId:a,dragItems:b,nodeInternals:c}){let d=b.map(a=>({...c.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[a?d.find(b=>b.id===a):d[0],d]}d1.displayName="Pane";let d5=(a,b,c,d)=>{let e=b.querySelectorAll(a);if(!e||!e.length)return null;let f=Array.from(e),g=b.getBoundingClientRect(),h={x:g.width*d[0],y:g.height*d[1]};return f.map(a=>{let b=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(b.left-g.left-h.x)/c,y:(b.top-g.top-h.y)/c,...ci(a)}})};function d6(a,b,c){return void 0===c?c:d=>{let e=b().nodeInternals.get(a);e&&c(d,{...e})}}function d7({id:a,store:b,unselect:c=!1,nodeRef:d}){let e,{addSelectedNodes:f,unselectNodesAndEdges:g,multiSelectionActive:h,nodeInternals:i,onError:j}=b.getState(),k=i.get(a);k?(b.setState({nodesSelectionActive:!1}),k.selected?(c||k.selected&&h)&&(g({nodes:[k],edges:[]}),requestAnimationFrame(()=>d?.current?.blur())):f([a])):j?.("012",(e=a,`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`))}function d8(a){return(b,c,d)=>a?.(b,d)}function d9({nodeRef:a,disabled:b=!1,noDragClassName:c,handleSelector:d,nodeId:e,isSelectable:f,selectNodesOnDrag:g}){let h,i=cd(),[j,k]=(0,s.useState)(!1),l=(0,s.useRef)([]),m=(0,s.useRef)({x:null,y:null}),n=(0,s.useRef)(0),o=(0,s.useRef)(null),p=(0,s.useRef)({x:0,y:0}),q=(0,s.useRef)(null),r=(0,s.useRef)(!1),t=(0,s.useRef)(!1),u=(0,s.useRef)(!1),v=(h=cd(),(0,s.useCallback)(({sourceEvent:a})=>{let{transform:b,snapGrid:c,snapToGrid:d}=h.getState(),e=a.touches?a.touches[0].clientX:a.clientX,f=a.touches?a.touches[0].clientY:a.clientY,g={x:(e-b[0])/b[2],y:(f-b[1])/b[2]};return{xSnapped:d?c[0]*Math.round(g.x/c[0]):g.x,ySnapped:d?c[1]*Math.round(g.y/c[1]):g.y,...g}},[]));return(0,s.useEffect)(()=>{if(a?.current){let h=au(a.current),j=({x:a,y:b})=>{let{nodeInternals:c,onNodeDrag:d,onSelectionDrag:f,updateNodePositions:g,nodeExtent:h,snapGrid:j,snapToGrid:n,nodeOrigin:o,onError:p}=i.getState();m.current={x:a,y:b};let r=!1,s={x:0,y:0,x2:0,y2:0};if(l.current.length>1&&h&&(s=co(cX(l.current,o))),l.current=l.current.map(d=>{let e={x:a-d.distance.x,y:b-d.distance.y};n&&(e.x=j[0]*Math.round(e.x/j[0]),e.y=j[1]*Math.round(e.y/j[1]));let f=[[h[0][0],h[0][1]],[h[1][0],h[1][1]]];l.current.length>1&&h&&!d.extent&&(f[0][0]=d.positionAbsolute.x-s.x+h[0][0],f[1][0]=d.positionAbsolute.x+(d.width??0)-s.x2+h[1][0],f[0][1]=d.positionAbsolute.y-s.y+h[0][1],f[1][1]=d.positionAbsolute.y+(d.height??0)-s.y2+h[1][1]);let g=d3(d,e,c,f,o,p);return r=r||d.position.x!==g.position.x||d.position.y!==g.position.y,d.position=g.position,d.positionAbsolute=g.positionAbsolute,d}),!r)return;g(l.current,!0,!0),k(!0);let t=e?d:d8(f);if(t&&q.current){let[a,b]=d4({nodeId:e,dragItems:l.current,nodeInternals:c});t(q.current,a,b)}},s=()=>{if(!o.current)return;let[a,b]=cm(p.current,o.current);if(0!==a||0!==b){let{transform:c,panBy:d}=i.getState();m.current.x=(m.current.x??0)-a/c[2],m.current.y=(m.current.y??0)-b/c[2],d({x:a,y:b})&&j(m.current)}n.current=requestAnimationFrame(s)},w=b=>{let{nodeInternals:c,multiSelectionActive:d,nodesDraggable:h,unselectNodesAndEdges:j,onNodeDragStart:k,onSelectionDragStart:n}=i.getState();t.current=!0;let o=e?k:d8(n);g&&f||d||!e||c.get(e)?.selected||j(),e&&f&&g&&d7({id:e,store:i,nodeRef:a});let p=v(b);if(m.current=p,l.current=Array.from(c.values()).filter(a=>(a.selected||a.id===e)&&(!a.parentNode||a.parentId||!function a(b,c){let d=b.parentNode||b.parentId;if(!d)return!1;let e=c.get(d);return!!e&&(!!e.selected||a(e,c))}(a,c))&&(a.draggable||h&&void 0===a.draggable)).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:p.x-(a.positionAbsolute?.x??0),y:p.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent})),o&&l.current){let[a,d]=d4({nodeId:e,dragItems:l.current,nodeInternals:c});o(b.sourceEvent,a,d)}};if(b)h.on(".drag",null);else{let b=(function(){var a,b,c,d,e=b5,f=b6,g=b7,h=b8,i={},j=E("start","drag","end"),k=0,l=0;function m(a){a.on("mousedown.drag",n).filter(h).on("touchstart.drag",q).on("touchmove.drag",r,av).on("touchend.drag touchcancel.drag",s).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(g,h){if(!d&&e.call(this,g,h)){var i=t(this,f.call(this,g,h),g,h,"mouse");i&&(au(g.view).on("mousemove.drag",o,aw).on("mouseup.drag",p,aw),az(g.view),ax(g),c=!1,a=g.clientX,b=g.clientY,i("start",g))}}function o(d){if(ay(d),!c){var e=d.clientX-a,f=d.clientY-b;c=e*e+f*f>l}i.mouse("drag",d)}function p(a){au(a.view).on("mousemove.drag mouseup.drag",null),aA(a.view,c),ay(a),i.mouse("end",a)}function q(a,b){if(e.call(this,a,b)){var c,d,g=a.changedTouches,h=f.call(this,a,b),i=g.length;for(c=0;c<i;++c)(d=t(this,h,a,b,g[c].identifier,g[c]))&&(ax(a),d("start",a,g[c]))}}function r(a){var b,c,d=a.changedTouches,e=d.length;for(b=0;b<e;++b)(c=i[d[b].identifier])&&(ay(a),c("drag",a,d[b]))}function s(a){var b,c,e=a.changedTouches,f=e.length;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),b=0;b<f;++b)(c=i[e[b].identifier])&&(ax(a),c("end",a,e[b]))}function t(a,b,c,d,e,f){var h,l,n,o=j.copy(),p=aD(f||c,b);if(null!=(n=g.call(a,new b4("beforestart",{sourceEvent:c,target:m,identifier:e,active:k,x:p[0],y:p[1],dx:0,dy:0,dispatch:o}),d)))return h=n.x-p[0]||0,l=n.y-p[1]||0,function c(f,g,j){var q,r=p;switch(f){case"start":i[e]=c,q=k++;break;case"end":delete i[e],--k;case"drag":p=aD(j||g,b),q=k}o.call(f,a,new b4(f,{sourceEvent:g,subject:n,target:m,identifier:e,active:q,x:p[0]+h,y:p[1]+l,dx:p[0]-r[0],dy:p[1]-r[1],dispatch:o}),d)}}return m.filter=function(a){return arguments.length?(e="function"==typeof a?a:b3(!!a),m):e},m.container=function(a){return arguments.length?(f="function"==typeof a?a:b3(a),m):f},m.subject=function(a){return arguments.length?(g="function"==typeof a?a:b3(a),m):g},m.touchable=function(a){return arguments.length?(h="function"==typeof a?a:b3(!!a),m):h},m.on=function(){var a=j.on.apply(j,arguments);return a===j?m:a},m.clickDistance=function(a){return arguments.length?(l=(a*=1)*a,m):Math.sqrt(l)},m})().on("start",a=>{let{domNode:b,nodeDragThreshold:c}=i.getState();0===c&&w(a),u.current=!1,m.current=v(a),o.current=b?.getBoundingClientRect()||null,p.current=cw(a.sourceEvent,o.current)}).on("drag",a=>{let b=v(a),{autoPanOnNodeDrag:c,nodeDragThreshold:d}=i.getState();if("touchmove"===a.sourceEvent.type&&a.sourceEvent.touches.length>1&&(u.current=!0),!u.current){if(!r.current&&t.current&&c&&(r.current=!0,s()),!t.current){let c=b.xSnapped-(m?.current?.x??0),e=b.ySnapped-(m?.current?.y??0);Math.sqrt(c*c+e*e)>d&&w(a)}(m.current.x!==b.xSnapped||m.current.y!==b.ySnapped)&&l.current&&t.current&&(q.current=a.sourceEvent,p.current=cw(a.sourceEvent,o.current),j(b))}}).on("end",a=>{if(t.current&&!u.current&&(k(!1),r.current=!1,t.current=!1,cancelAnimationFrame(n.current),l.current)){let{updateNodePositions:b,nodeInternals:c,onNodeDragStop:d,onSelectionDragStop:f}=i.getState(),g=e?d:d8(f);if(b(l.current,!1,!1),g){let[b,d]=d4({nodeId:e,dragItems:l.current,nodeInternals:c});g(a.sourceEvent,b,d)}}}).filter(b=>{let e=b.target;return!b.button&&(!c||!d2(e,`.${c}`,a))&&(!d||d2(e,d,a))});return h.call(b),()=>{h.on(".drag",null)}}}},[a,b,c,d,f,i,e,g,v]),j}function ea(){let a=cd();return(0,s.useCallback)(b=>{let{nodeInternals:c,nodeExtent:d,updateNodePositions:e,getNodes:f,snapToGrid:g,snapGrid:h,onError:i,nodesDraggable:j}=a.getState(),k=f().filter(a=>a.selected&&(a.draggable||j&&void 0===a.draggable)),l=g?h[0]:5,m=g?h[1]:5,n=b.isShiftPressed?4:1,o=b.x*l*n,p=b.y*m*n;e(k.map(a=>{if(a.positionAbsolute){let b={x:a.positionAbsolute.x+o,y:a.positionAbsolute.y+p};g&&(b.x=h[0]*Math.round(b.x/h[0]),b.y=h[1]*Math.round(b.y/h[1]));let{positionAbsolute:e,position:f}=d3(a,b,c,d,void 0,i);a.position=f,a.positionAbsolute=e}return a}),!0,!1)},[])}let eb={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ec=a=>{let b=({id:b,type:c,data:d,xPos:e,yPos:f,xPosOrigin:g,yPosOrigin:h,selected:i,onClick:j,onMouseEnter:k,onMouseMove:l,onMouseLeave:m,onContextMenu:n,onDoubleClick:o,style:p,className:q,isDraggable:r,isSelectable:u,isConnectable:v,isFocusable:w,selectNodesOnDrag:x,sourcePosition:y,targetPosition:z,hidden:A,resizeObserver:B,dragHandle:C,zIndex:D,isParent:E,noDragClassName:F,noPanClassName:G,initialized:H,disableKeyboardA11y:I,ariaLabel:J,rfId:K,hasHandleBounds:L})=>{let M=cd(),N=(0,s.useRef)(null),O=(0,s.useRef)(null),P=(0,s.useRef)(y),Q=(0,s.useRef)(z),R=(0,s.useRef)(c),S=u||r||j||k||l||m,T=ea(),U=d6(b,M.getState,k),V=d6(b,M.getState,l),W=d6(b,M.getState,m),X=d6(b,M.getState,n),Y=d6(b,M.getState,o);(0,s.useEffect)(()=>()=>{O.current&&(B?.unobserve(O.current),O.current=null)},[]),(0,s.useEffect)(()=>{if(N.current&&!A){let a=N.current;H&&L&&O.current===a||(O.current&&B?.unobserve(O.current),B?.observe(a),O.current=a)}},[A,H,L]),(0,s.useEffect)(()=>{let a=R.current!==c,d=P.current!==y,e=Q.current!==z;N.current&&(a||d||e)&&(a&&(R.current=c),d&&(P.current=y),e&&(Q.current=z),M.getState().updateNodeDimensions([{id:b,nodeElement:N.current,forceUpdate:!0}]))},[b,c,y,z]);let Z=d9({nodeRef:N,disabled:A||!r,noDragClassName:F,handleSelector:C,nodeId:b,isSelectable:u,selectNodesOnDrag:x});return A?null:s.default.createElement("div",{className:t(["react-flow__node",`react-flow__node-${c}`,{[G]:r},q,{selected:i,selectable:u,parent:E,dragging:Z}]),ref:N,style:{zIndex:D,transform:`translate(${g}px,${h}px)`,pointerEvents:S?"all":"none",visibility:H?"visible":"hidden",...p},"data-id":b,"data-testid":`rf__node-${b}`,onMouseEnter:U,onMouseMove:V,onMouseLeave:W,onContextMenu:X,onClick:a=>{let{nodeDragThreshold:c}=M.getState();if(u&&(!x||!r||c>0)&&d7({id:b,store:M,nodeRef:N}),j){let c=M.getState().nodeInternals.get(b);c&&j(a,{...c})}},onDoubleClick:Y,onKeyDown:w?a=>{cv(a)||!I&&(ct.includes(a.key)&&u?d7({id:b,store:M,unselect:"Escape"===a.key,nodeRef:N}):r&&i&&Object.prototype.hasOwnProperty.call(eb,a.key)&&(M.setState({ariaLiveMessage:`Moved selected node ${a.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~e}, y: ${~~f}`}),T({x:eb[a.key].x,y:eb[a.key].y,isShiftPressed:a.shiftKey})))}:void 0,tabIndex:w?0:void 0,role:w?"button":void 0,"aria-describedby":I?void 0:`${dv}-${K}`,"aria-label":J},s.default.createElement(cR,{value:b},s.default.createElement(a,{id:b,data:d,type:c,xPos:e,yPos:f,selected:i,isConnectable:v,sourcePosition:y,targetPosition:z,dragging:Z,dragHandle:C,zIndex:D})))};return b.displayName="NodeWrapper",(0,s.memo)(b)};let ed=a=>({...cX(a.getNodes().filter(a=>a.selected),a.nodeOrigin),transformString:`translate(${a.transform[0]}px,${a.transform[1]}px) scale(${a.transform[2]})`,userSelectionActive:a.userSelectionActive});var ee=(0,s.memo)(function({onSelectionContextMenu:a,noPanClassName:b,disableKeyboardA11y:c}){let d=cd(),{width:e,height:f,x:g,y:h,transformString:i,userSelectionActive:j}=cc(ed,C),k=ea(),l=(0,s.useRef)(null);if((0,s.useEffect)(()=>{c||l.current?.focus({preventScroll:!0})},[c]),d9({nodeRef:l}),j||!e||!f)return null;let m=a?b=>{a(b,d.getState().getNodes().filter(a=>a.selected))}:void 0;return s.default.createElement("div",{className:t(["react-flow__nodesselection","react-flow__container",b]),style:{transform:i}},s.default.createElement("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:c?void 0:-1,onKeyDown:c?void 0:a=>{Object.prototype.hasOwnProperty.call(eb,a.key)&&k({x:eb[a.key].x,y:eb[a.key].y,isShiftPressed:a.shiftKey})},style:{width:e,height:f,top:h,left:g}}))});let ef=a=>a.nodesSelectionActive,eg=({children:a,onPaneClick:b,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:e,onPaneContextMenu:f,onPaneScroll:g,deleteKeyCode:h,onMove:i,onMoveStart:j,onMoveEnd:k,selectionKeyCode:l,selectionOnDrag:m,selectionMode:n,onSelectionStart:o,onSelectionEnd:p,multiSelectionKeyCode:q,panActivationKeyCode:r,zoomActivationKeyCode:t,elementsSelectable:u,zoomOnScroll:v,zoomOnPinch:w,panOnScroll:x,panOnScrollSpeed:y,panOnScrollMode:z,zoomOnDoubleClick:A,panOnDrag:B,defaultViewport:C,translateExtent:D,minZoom:E,maxZoom:F,preventScrolling:G,onSelectionContextMenu:H,noWheelClassName:I,noPanClassName:J,disableKeyboardA11y:K})=>{let L=cc(ef),M=dA(l),N=dA(r),O=N||B,P=N||x,Q=M||m&&!0!==O;return(({deleteKeyCode:a,multiSelectionKeyCode:b})=>{let c=cd(),{deleteElements:d}=dK(),e=dA(a,dL),f=dA(b);(0,s.useEffect)(()=>{if(e){let{edges:a,getNodes:b}=c.getState();d({nodes:b().filter(a=>a.selected),edges:a.filter(a=>a.selected)}),c.setState({nodesSelectionActive:!1})}},[e]),(0,s.useEffect)(()=>{c.setState({multiSelectionActive:f})},[f])})({deleteKeyCode:h,multiSelectionKeyCode:q}),s.default.createElement(dS,{onMove:i,onMoveStart:j,onMoveEnd:k,onPaneContextMenu:f,elementsSelectable:u,zoomOnScroll:v,zoomOnPinch:w,panOnScroll:P,panOnScrollSpeed:y,panOnScrollMode:z,zoomOnDoubleClick:A,panOnDrag:!M&&O,defaultViewport:C,translateExtent:D,minZoom:E,maxZoom:F,zoomActivationKeyCode:t,preventScrolling:G,noWheelClassName:I,noPanClassName:J},s.default.createElement(d1,{onSelectionStart:o,onSelectionEnd:p,onPaneClick:b,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:e,onPaneContextMenu:f,onPaneScroll:g,panOnDrag:O,isSelecting:!!Q,selectionMode:n},a,L&&s.default.createElement(ee,{onSelectionContextMenu:H,noPanClassName:J,disableKeyboardA11y:K})))};eg.displayName="FlowRenderer";var eh=(0,s.memo)(eg);function ei(a){let b={input:ec(a.input||de),default:ec(a.default||dc),output:ec(a.output||dg),group:ec(a.group||dh)},c=Object.keys(a).filter(a=>!["input","default","output","group"].includes(a)).reduce((b,c)=>(b[c]=ec(a[c]||dc),b),{});return{...b,...c}}let ej=a=>({nodesDraggable:a.nodesDraggable,nodesConnectable:a.nodesConnectable,nodesFocusable:a.nodesFocusable,elementsSelectable:a.elementsSelectable,updateNodeDimensions:a.updateNodeDimensions,onError:a.onError}),ek=a=>{var b;let{nodesDraggable:c,nodesConnectable:d,nodesFocusable:e,elementsSelectable:f,updateNodeDimensions:g,onError:h}=cc(ej,C),i=(b=a.onlyRenderVisibleElements,cc((0,s.useCallback)(a=>b?cY(a.nodeInternals,{x:0,y:0,width:a.width,height:a.height},a.transform,!0):a.getNodes(),[b]))),j=(0,s.useRef)(),k=(0,s.useMemo)(()=>{if("undefined"==typeof ResizeObserver)return null;let a=new ResizeObserver(a=>{g(a.map(a=>({id:a.target.getAttribute("data-id"),nodeElement:a.target,forceUpdate:!0})))});return j.current=a,a},[]);return(0,s.useEffect)(()=>()=>{j?.current?.disconnect()},[]),s.default.createElement("div",{className:"react-flow__nodes",style:dM},i.map(b=>{let g,i=b.type||"default";a.nodeTypes[i]||(h?.("003",(g=i,`Node type "${g}" not found. Using fallback type "default".`)),i="default");let j=a.nodeTypes[i]||a.nodeTypes.default,l=!!(b.draggable||c&&void 0===b.draggable),m=!!(b.selectable||f&&void 0===b.selectable),n=!!(b.connectable||d&&void 0===b.connectable),o=!!(b.focusable||e&&void 0===b.focusable),q=a.nodeExtent?ck(b.positionAbsolute,a.nodeExtent):b.positionAbsolute,r=q?.x??0,t=q?.y??0,u=(({x:a,y:b,width:c,height:d,origin:e})=>!c||!d||e[0]<0||e[1]<0||e[0]>1||e[1]>1?{x:a,y:b}:{x:a-c*e[0],y:b-d*e[1]})({x:r,y:t,width:b.width??0,height:b.height??0,origin:a.nodeOrigin});return s.default.createElement(j,{key:b.id,id:b.id,className:b.className,style:b.style,type:i,data:b.data,sourcePosition:b.sourcePosition||p.Bottom,targetPosition:b.targetPosition||p.Top,hidden:b.hidden,xPos:r,yPos:t,xPosOrigin:u.x,yPosOrigin:u.y,selectNodesOnDrag:a.selectNodesOnDrag,onClick:a.onNodeClick,onMouseEnter:a.onNodeMouseEnter,onMouseMove:a.onNodeMouseMove,onMouseLeave:a.onNodeMouseLeave,onContextMenu:a.onNodeContextMenu,onDoubleClick:a.onNodeDoubleClick,selected:!!b.selected,isDraggable:l,isSelectable:m,isConnectable:n,isFocusable:o,resizeObserver:k,dragHandle:b.dragHandle,zIndex:b[cs]?.z??0,isParent:!!b[cs]?.isParent,noDragClassName:a.noDragClassName,noPanClassName:a.noPanClassName,initialized:!!b.width&&!!b.height,rfId:a.rfId,disableKeyboardA11y:a.disableKeyboardA11y,ariaLabel:b.ariaLabel,hasHandleBounds:!!b[cs]?.handleBounds})}))};ek.displayName="NodeRenderer";var el=(0,s.memo)(ek);let em="react-flow__edgeupdater",en=({position:a,centerX:b,centerY:c,radius:d=10,onMouseDown:e,onMouseEnter:f,onMouseOut:g,type:h})=>s.default.createElement("circle",{onMouseDown:e,onMouseEnter:f,onMouseOut:g,className:t([em,`${em}-${h}`]),cx:a===p.Left?b-d:a===p.Right?b+d:b,cy:a===p.Top?c-d:a===p.Bottom?c+d:c,r:d,stroke:"transparent",fill:"transparent"}),eo=()=>!0;var ep=a=>{let b=({id:b,className:c,type:d,data:e,onClick:f,onEdgeDoubleClick:g,selected:h,animated:i,label:j,labelStyle:k,labelShowBg:l,labelBgStyle:m,labelBgPadding:n,labelBgBorderRadius:o,style:p,source:q,target:r,sourceX:u,sourceY:v,targetX:w,targetY:x,sourcePosition:y,targetPosition:z,elementsSelectable:A,hidden:B,sourceHandleId:C,targetHandleId:D,onContextMenu:E,onMouseEnter:F,onMouseMove:G,onMouseLeave:H,reconnectRadius:I,onReconnect:J,onReconnectStart:K,onReconnectEnd:L,markerEnd:M,markerStart:N,rfId:O,ariaLabel:P,isFocusable:Q,isReconnectable:R,pathOptions:S,interactionWidth:T,disableKeyboardA11y:U})=>{let V=(0,s.useRef)(null),[W,X]=(0,s.useState)(!1),[Y,Z]=(0,s.useState)(!1),$=cd(),_=(0,s.useMemo)(()=>`url('#${cS(N,O)}')`,[N,O]),aa=(0,s.useMemo)(()=>`url('#${cS(M,O)}')`,[M,O]);if(B)return null;let ab=cz(b,$.getState,g),ac=cz(b,$.getState,E),ad=cz(b,$.getState,F),ae=cz(b,$.getState,G),af=cz(b,$.getState,H),ag=(a,c)=>{if(0!==a.button)return;let{edges:d,isValidConnection:e}=$.getState(),f=c?r:q,g=(c?D:C)||null,h=c?"target":"source",i=d.find(a=>a.id===b);Z(!0),K?.(a,i,h),c6({event:a,handleId:g,nodeId:f,onConnect:a=>J?.(i,a),isTarget:c,getState:$.getState,setState:$.setState,isValidConnection:e||eo,edgeUpdaterType:h,onReconnectEnd:a=>{Z(!1),L?.(a,i,h)}})},ah=()=>X(!0),ai=()=>X(!1);return s.default.createElement("g",{className:t(["react-flow__edge",`react-flow__edge-${d}`,c,{selected:h,animated:i,inactive:!A&&!f,updating:W}]),onClick:a=>{let{edges:c,addSelectedEdges:d,unselectNodesAndEdges:e,multiSelectionActive:g}=$.getState(),h=c.find(a=>a.id===b);h&&(A&&($.setState({nodesSelectionActive:!1}),h.selected&&g?(e({nodes:[],edges:[h]}),V.current?.blur()):d([b])),f&&f(a,h))},onDoubleClick:ab,onContextMenu:ac,onMouseEnter:ad,onMouseMove:ae,onMouseLeave:af,onKeyDown:Q?a=>{if(!U&&ct.includes(a.key)&&A){let{unselectNodesAndEdges:c,addSelectedEdges:d,edges:e}=$.getState();"Escape"===a.key?(V.current?.blur(),c({edges:[e.find(a=>a.id===b)]})):d([b])}}:void 0,tabIndex:Q?0:void 0,role:Q?"button":"img","data-testid":`rf__edge-${b}`,"aria-label":null===P?void 0:P||`Edge from ${q} to ${r}`,"aria-describedby":Q?`${dw}-${O}`:void 0,ref:V},!Y&&s.default.createElement(a,{id:b,source:q,target:r,selected:h,animated:i,label:j,labelStyle:k,labelShowBg:l,labelBgStyle:m,labelBgPadding:n,labelBgBorderRadius:o,data:e,style:p,sourceX:u,sourceY:v,targetX:w,targetY:x,sourcePosition:y,targetPosition:z,sourceHandleId:C,targetHandleId:D,markerStart:_,markerEnd:aa,pathOptions:S,interactionWidth:T}),R&&s.default.createElement(s.default.Fragment,null,("source"===R||!0===R)&&s.default.createElement(en,{position:y,centerX:u,centerY:v,radius:I,onMouseDown:a=>ag(a,!0),onMouseEnter:ah,onMouseOut:ai,type:"source"}),("target"===R||!0===R)&&s.default.createElement(en,{position:z,centerX:w,centerY:x,radius:I,onMouseDown:a=>ag(a,!1),onMouseEnter:ah,onMouseOut:ai,type:"target"})))};return b.displayName="EdgeWrapper",(0,s.memo)(b)};function eq(a){let b={default:ep(a.default||cP),straight:ep(a.bezier||cL),step:ep(a.step||cK),smoothstep:ep(a.step||cJ),simplebezier:ep(a.simplebezier||cE)},c=Object.keys(a).filter(a=>!["default","bezier"].includes(a)).reduce((b,c)=>(b[c]=ep(a[c]||cP),b),{});return{...b,...c}}function er(a,b,c=null){let d=(c?.x||0)+b.x,e=(c?.y||0)+b.y,f=c?.width||b.width,g=c?.height||b.height;switch(a){case p.Top:return{x:d+f/2,y:e};case p.Right:return{x:d+f,y:e+g/2};case p.Bottom:return{x:d+f/2,y:e+g};case p.Left:return{x:d,y:e+g/2}}}function es(a,b){return a?1!==a.length&&b?b&&a.find(a=>a.id===b)||null:a[0]:null}function et(a){let b=a?.[cs]?.handleBounds||null,c=b&&a?.width&&a?.height&&void 0!==a?.positionAbsolute?.x&&void 0!==a?.positionAbsolute?.y;return[{x:a?.positionAbsolute?.x||0,y:a?.positionAbsolute?.y||0,width:a?.width||0,height:a?.height||0},b,!!c]}let eu=[{level:0,isMaxLevel:!0,edges:[]}],ev={[o.Arrow]:({color:a="none",strokeWidth:b=1})=>s.default.createElement("polyline",{style:{stroke:a,strokeWidth:b},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[o.ArrowClosed]:({color:a="none",strokeWidth:b=1})=>s.default.createElement("polyline",{style:{stroke:a,fill:a,strokeWidth:b},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},ew=({id:a,type:b,color:c,width:d=12.5,height:e=12.5,markerUnits:f="strokeWidth",strokeWidth:g,orient:h="auto-start-reverse"})=>{let i,j=(i=cd(),(0,s.useMemo)(()=>{let a;return Object.prototype.hasOwnProperty.call(ev,b)?ev[b]:(i.getState().onError?.("009",(a=b,`Marker type "${a}" doesn't exist.`)),null)},[b]));return j?s.default.createElement("marker",{className:"react-flow__arrowhead",id:a,markerWidth:`${d}`,markerHeight:`${e}`,viewBox:"-10 -10 20 20",markerUnits:f,orient:h,refX:"0",refY:"0"},s.default.createElement(j,{color:c,strokeWidth:g})):null},ex=({defaultColor:a,rfId:b})=>{let c=cc((0,s.useCallback)((({defaultColor:a,rfId:b})=>c=>{let d=[];return c.edges.reduce((c,e)=>([e.markerStart,e.markerEnd].forEach(e=>{if(e&&"object"==typeof e){let f=cS(e,b);d.includes(f)||(c.push({id:f,color:e.color||a,...e}),d.push(f))}}),c),[]).sort((a,b)=>a.id.localeCompare(b.id))})({defaultColor:a,rfId:b}),[a,b]),(a,b)=>!(a.length!==b.length||a.some((a,c)=>a.id!==b[c].id)));return s.default.createElement("defs",null,c.map(a=>s.default.createElement(ew,{id:a.id,key:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient})))};ex.displayName="MarkerDefinitions";var ey=(0,s.memo)(ex);let ez=a=>({nodesConnectable:a.nodesConnectable,edgesFocusable:a.edgesFocusable,edgesUpdatable:a.edgesUpdatable,elementsSelectable:a.elementsSelectable,width:a.width,height:a.height,connectionMode:a.connectionMode,nodeInternals:a.nodeInternals,onError:a.onError}),eA=({defaultMarkerColor:a,onlyRenderVisibleElements:b,elevateEdgesOnSelect:c,rfId:d,edgeTypes:e,noPanClassName:f,onEdgeContextMenu:g,onEdgeMouseEnter:h,onEdgeMouseMove:i,onEdgeMouseLeave:j,onEdgeClick:l,onEdgeDoubleClick:m,onReconnect:n,onReconnectStart:o,onReconnectEnd:q,reconnectRadius:r,children:u,disableKeyboardA11y:v})=>{let{edgesFocusable:w,edgesUpdatable:x,elementsSelectable:y,width:z,height:A,connectionMode:B,nodeInternals:D,onError:E}=cc(ez,C),F=function(a,b,c=!1){let d=-1,e=Object.entries(a.reduce((a,e)=>{let f=cr(e.zIndex),g=f?e.zIndex:0;if(c){let a=b.get(e.target),c=b.get(e.source),d=e.selected||a?.selected||c?.selected,h=Math.max(c?.[cs]?.z||0,a?.[cs]?.z||0,1e3);g=(f?e.zIndex:0)+(d?h:0)}return a[g]?a[g].push(e):a[g]=[e],d=g>d?g:d,a},{})).map(([a,b])=>{let c=+a;return{edges:b,level:c,isMaxLevel:c===d}});return 0===e.length?eu:e}(cc((0,s.useCallback)(a=>b?a.edges.filter(b=>{let c=D.get(b.source),d=D.get(b.target);return c?.width&&c?.height&&d?.width&&d?.height&&function({sourcePos:a,targetPos:b,sourceWidth:c,sourceHeight:d,targetWidth:e,targetHeight:f,width:g,height:h,transform:i}){let j={x:Math.min(a.x,b.x),y:Math.min(a.y,b.y),x2:Math.max(a.x+c,b.x+e),y2:Math.max(a.y+d,b.y+f)};j.x===j.x2&&(j.x2+=1),j.y===j.y2&&(j.y2+=1);let k=co({x:(0-i[0])/i[2],y:(0-i[1])/i[2],width:g/i[2],height:h/i[2]});return Math.ceil(Math.max(0,Math.min(k.x2,j.x2)-Math.max(k.x,j.x))*Math.max(0,Math.min(k.y2,j.y2)-Math.max(k.y,j.y)))>0}({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:d.width,targetHeight:d.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[b,D])),D,c);return z?s.default.createElement(s.default.Fragment,null,F.map(({level:b,edges:c,isMaxLevel:u})=>s.default.createElement("svg",{key:b,style:{zIndex:b},width:z,height:A,className:"react-flow__edges react-flow__container"},u&&s.default.createElement(ey,{defaultColor:a,rfId:d}),s.default.createElement("g",null,c.map(a=>{let b,c,u,[z,A,C]=et(D.get(a.source)),[F,G,H]=et(D.get(a.target));if(!C||!H)return null;let I=a.type||"default";e[I]||(E?.("011",(b=I,`Edge type "${b}" not found. Using fallback type "default".`)),I="default");let J=e[I]||e.default,K=B===k.Strict?G.target:(G.target??[]).concat(G.source??[]),L=es(A.source,a.sourceHandle),M=es(K,a.targetHandle),N=L?.position||p.Bottom,O=M?.position||p.Top,P=!!(a.focusable||w&&void 0===a.focusable),Q=a.reconnectable||a.updatable;if(!L||!M){let b,c;return E?.("008",(b=L,c=a,`Couldn't create edge for ${!b?"source":"target"} handle id: "${!b?c.sourceHandle:c.targetHandle}", edge id: ${c.id}.`)),null}let{sourceX:R,sourceY:S,targetX:T,targetY:U}=(c=er(N,z,L),u=er(O,F,M),{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y});return s.default.createElement(J,{key:a.id,id:a.id,className:t([a.className,f]),type:I,data:a.data,selected:!!a.selected,animated:!!a.animated,hidden:!!a.hidden,label:a.label,labelStyle:a.labelStyle,labelShowBg:a.labelShowBg,labelBgStyle:a.labelBgStyle,labelBgPadding:a.labelBgPadding,labelBgBorderRadius:a.labelBgBorderRadius,style:a.style,source:a.source,target:a.target,sourceHandleId:a.sourceHandle,targetHandleId:a.targetHandle,markerEnd:a.markerEnd,markerStart:a.markerStart,sourceX:R,sourceY:S,targetX:T,targetY:U,sourcePosition:N,targetPosition:O,elementsSelectable:y,onContextMenu:g,onMouseEnter:h,onMouseMove:i,onMouseLeave:j,onClick:l,onEdgeDoubleClick:m,onReconnect:n,onReconnectStart:o,onReconnectEnd:q,reconnectRadius:r,rfId:d,ariaLabel:a.ariaLabel,isFocusable:P,isReconnectable:void 0!==n&&(Q||x&&void 0===Q),pathOptions:"pathOptions"in a?a.pathOptions:void 0,interactionWidth:a.interactionWidth,disableKeyboardA11y:v})})))),u):null};eA.displayName="EdgeRenderer";var eB=(0,s.memo)(eA);let eC=a=>`translate(${a.transform[0]}px,${a.transform[1]}px) scale(${a.transform[2]})`;function eD({children:a}){let b=cc(eC);return s.default.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:b}},a)}let eE={[p.Left]:p.Right,[p.Right]:p.Left,[p.Top]:p.Bottom,[p.Bottom]:p.Top},eF=({nodeId:a,handleType:b,style:c,type:d=n.Bezier,CustomComponent:e,connectionStatus:f})=>{let{fromNode:g,handleId:h,toX:i,toY:j,connectionMode:l}=cc((0,s.useCallback)(b=>({fromNode:b.nodeInternals.get(a),handleId:b.connectionHandleId,toX:(b.connectionPosition.x-b.transform[0])/b.transform[2],toY:(b.connectionPosition.y-b.transform[1])/b.transform[2],connectionMode:b.connectionMode}),[a]),C),m=g?.[cs]?.handleBounds,o=m?.[b];if(l===k.Loose&&(o=o||m?.["source"===b?"target":"source"]),!g||!o)return null;let p=h?o.find(a=>a.id===h):o[0],q=p?p.x+p.width/2:(g.width??0)/2,r=p?p.y+p.height/2:g.height??0,t=(g.positionAbsolute?.x??0)+q,u=(g.positionAbsolute?.y??0)+r,v=p?.position,w=v?eE[v]:null;if(!v||!w)return null;if(e)return s.default.createElement(e,{connectionLineType:d,connectionLineStyle:c,fromNode:g,fromHandle:p,fromX:t,fromY:u,toX:i,toY:j,fromPosition:v,toPosition:w,connectionStatus:f});let x="",y={sourceX:t,sourceY:u,sourcePosition:v,targetX:i,targetY:j,targetPosition:w};return d===n.Bezier?[x]=cO(y):d===n.Step?[x]=cI({...y,borderRadius:0}):d===n.SmoothStep?[x]=cI(y):d===n.SimpleBezier?[x]=cD(y):x=`M${t},${u} ${i},${j}`,s.default.createElement("path",{d:x,fill:"none",className:"react-flow__connection-path",style:c})};eF.displayName="ConnectionLine";let eG=a=>({nodeId:a.connectionNodeId,handleType:a.connectionHandleType,nodesConnectable:a.nodesConnectable,connectionStatus:a.connectionStatus,width:a.width,height:a.height});function eH({containerStyle:a,style:b,type:c,component:d}){let{nodeId:e,handleType:f,nodesConnectable:g,width:h,height:i,connectionStatus:j}=cc(eG,C);return e&&f&&h&&g?s.default.createElement("svg",{style:a,width:h,height:i,className:"react-flow__edges react-flow__connectionline react-flow__container"},s.default.createElement("g",{className:t(["react-flow__connection",j])},s.default.createElement(eF,{nodeId:e,handleType:f,style:b,type:c,CustomComponent:d,connectionStatus:j}))):null}function eI(a,b){return(0,s.useRef)(null),cd(),(0,s.useMemo)(()=>b(a),[a])}let eJ=({nodeTypes:a,edgeTypes:b,onMove:c,onMoveStart:d,onMoveEnd:e,onInit:f,onNodeClick:g,onEdgeClick:h,onNodeDoubleClick:i,onEdgeDoubleClick:j,onNodeMouseEnter:k,onNodeMouseMove:l,onNodeMouseLeave:m,onNodeContextMenu:n,onSelectionContextMenu:o,onSelectionStart:p,onSelectionEnd:q,connectionLineType:r,connectionLineStyle:t,connectionLineComponent:u,connectionLineContainerStyle:v,selectionKeyCode:w,selectionOnDrag:x,selectionMode:y,multiSelectionKeyCode:z,panActivationKeyCode:A,zoomActivationKeyCode:B,deleteKeyCode:C,onlyRenderVisibleElements:D,elementsSelectable:E,selectNodesOnDrag:F,defaultViewport:G,translateExtent:H,minZoom:I,maxZoom:J,preventScrolling:K,defaultMarkerColor:L,zoomOnScroll:M,zoomOnPinch:N,panOnScroll:O,panOnScrollSpeed:P,panOnScrollMode:Q,zoomOnDoubleClick:R,panOnDrag:S,onPaneClick:T,onPaneMouseEnter:U,onPaneMouseMove:V,onPaneMouseLeave:W,onPaneScroll:X,onPaneContextMenu:Y,onEdgeContextMenu:Z,onEdgeMouseEnter:$,onEdgeMouseMove:_,onEdgeMouseLeave:aa,onReconnect:ab,onReconnectStart:ac,onReconnectEnd:ad,reconnectRadius:ae,noDragClassName:af,noWheelClassName:ag,noPanClassName:ah,elevateEdgesOnSelect:ai,disableKeyboardA11y:aj,nodeOrigin:ak,nodeExtent:al,rfId:am})=>{let an,ao,ap=eI(a,ei),aq=eI(b,eq);return an=dK(),ao=(0,s.useRef)(!1),(0,s.useEffect)(()=>{!ao.current&&an.viewportInitialized&&f&&(setTimeout(()=>f(an),1),ao.current=!0)},[f,an.viewportInitialized]),s.default.createElement(eh,{onPaneClick:T,onPaneMouseEnter:U,onPaneMouseMove:V,onPaneMouseLeave:W,onPaneContextMenu:Y,onPaneScroll:X,deleteKeyCode:C,selectionKeyCode:w,selectionOnDrag:x,selectionMode:y,onSelectionStart:p,onSelectionEnd:q,multiSelectionKeyCode:z,panActivationKeyCode:A,zoomActivationKeyCode:B,elementsSelectable:E,onMove:c,onMoveStart:d,onMoveEnd:e,zoomOnScroll:M,zoomOnPinch:N,zoomOnDoubleClick:R,panOnScroll:O,panOnScrollSpeed:P,panOnScrollMode:Q,panOnDrag:S,defaultViewport:G,translateExtent:H,minZoom:I,maxZoom:J,onSelectionContextMenu:o,preventScrolling:K,noDragClassName:af,noWheelClassName:ag,noPanClassName:ah,disableKeyboardA11y:aj},s.default.createElement(eD,null,s.default.createElement(eB,{edgeTypes:aq,onEdgeClick:h,onEdgeDoubleClick:j,onlyRenderVisibleElements:D,onEdgeContextMenu:Z,onEdgeMouseEnter:$,onEdgeMouseMove:_,onEdgeMouseLeave:aa,onReconnect:ab,onReconnectStart:ac,onReconnectEnd:ad,reconnectRadius:ae,defaultMarkerColor:L,noPanClassName:ah,elevateEdgesOnSelect:!!ai,disableKeyboardA11y:aj,rfId:am},s.default.createElement(eH,{style:t,type:r,component:u,containerStyle:v})),s.default.createElement("div",{className:"react-flow__edgelabel-renderer"}),s.default.createElement(el,{nodeTypes:ap,onNodeClick:g,onNodeDoubleClick:i,onNodeMouseEnter:k,onNodeMouseMove:l,onNodeMouseLeave:m,onNodeContextMenu:n,selectNodesOnDrag:F,onlyRenderVisibleElements:D,noPanClassName:ah,noDragClassName:af,disableKeyboardA11y:aj,nodeOrigin:ak,nodeExtent:al,rfId:am})))};eJ.displayName="GraphView";var eK=(0,s.memo)(eJ);let eL=[[-1/0,-1/0],[1/0,1/0]],eM={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:eL,nodeExtent:eL,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:k.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:cu,isValidConnection:void 0},eN=({children:a})=>{let b,c,d=(0,s.useRef)(null);return d.current||(b=(a,b)=>({...eM,setNodes:c=>{let{nodeInternals:d,nodeOrigin:e,elevateNodesOnSelect:f}=b();a({nodeInternals:dE(c,d,e,f)})},getNodes:()=>Array.from(b().nodeInternals.values()),setEdges:c=>{let{defaultEdgeOptions:d={}}=b();a({edges:c.map(a=>({...d,...a}))})},setDefaultNodesAndEdges:(c,d)=>{let e=void 0!==c,f=void 0!==d;a({nodeInternals:e?dE(c,new Map,b().nodeOrigin,b().elevateNodesOnSelect):new Map,edges:f?d:[],hasDefaultNodes:e,hasDefaultEdges:f})},updateNodeDimensions:c=>{let{onNodesChange:d,nodeInternals:e,fitViewOnInit:f,fitViewOnInitDone:g,fitViewOnInitOptions:h,domNode:i,nodeOrigin:j}=b(),k=i?.querySelector(".react-flow__viewport");if(!k)return;let l=window.getComputedStyle(k),{m22:m}=new window.DOMMatrixReadOnly(l.transform),n=c.reduce((a,b)=>{let c=e.get(b.id);if(c?.hidden)e.set(c.id,{...c,[cs]:{...c[cs],handleBounds:void 0}});else if(c){let d=ci(b.nodeElement);d.width&&d.height&&(c.width!==d.width||c.height!==d.height||b.forceUpdate)&&(e.set(c.id,{...c,[cs]:{...c[cs],handleBounds:{source:d5(".source",b.nodeElement,m,j),target:d5(".target",b.nodeElement,m,j)}},...d}),a.push({id:c.id,type:"dimensions",dimensions:d}))}return a},[]);dD(e,j);let o=g||f&&!g&&dF(b,{initial:!0,...h});a({nodeInternals:new Map(e),fitViewOnInitDone:o}),n?.length>0&&d?.(n)},updateNodePositions:(a,c=!0,d=!1)=>{let{triggerNodeChanges:e}=b();e(a.map(a=>{let b={id:a.id,type:"position",dragging:d};return c&&(b.positionAbsolute=a.positionAbsolute,b.position=a.position),b}))},triggerNodeChanges:c=>{let{onNodesChange:d,nodeInternals:e,hasDefaultNodes:f,nodeOrigin:g,getNodes:h,elevateNodesOnSelect:i}=b();c?.length&&(f&&a({nodeInternals:dE(dX(c,h()),e,g,i)}),d?.(c))},addSelectedNodes:c=>{let d,{multiSelectionActive:e,edges:f,getNodes:g}=b(),h=null;e?d=c.map(a=>dZ(a,!0)):(d=d$(g(),c),h=d$(f,[])),dG({changedNodes:d,changedEdges:h,get:b,set:a})},addSelectedEdges:c=>{let d,{multiSelectionActive:e,edges:f,getNodes:g}=b(),h=null;e?d=c.map(a=>dZ(a,!0)):(d=d$(f,c),h=d$(g(),[])),dG({changedNodes:h,changedEdges:d,get:b,set:a})},unselectNodesAndEdges:({nodes:c,edges:d}={})=>{let{edges:e,getNodes:f}=b();dG({changedNodes:(c||f()).map(a=>(a.selected=!1,dZ(a.id,!1))),changedEdges:(d||e).map(a=>dZ(a.id,!1)),get:b,set:a})},setMinZoom:c=>{let{d3Zoom:d,maxZoom:e}=b();d?.scaleExtent([c,e]),a({minZoom:c})},setMaxZoom:c=>{let{d3Zoom:d,minZoom:e}=b();d?.scaleExtent([e,c]),a({maxZoom:c})},setTranslateExtent:c=>{b().d3Zoom?.translateExtent(c),a({translateExtent:c})},resetSelectedElements:()=>{let{edges:c,getNodes:d}=b();dG({changedNodes:d().filter(a=>a.selected).map(a=>dZ(a.id,!1)),changedEdges:c.filter(a=>a.selected).map(a=>dZ(a.id,!1)),get:b,set:a})},setNodeExtent:c=>{let{nodeInternals:d}=b();d.forEach(a=>{a.positionAbsolute=ck(a.position,c)}),a({nodeExtent:c,nodeInternals:new Map(d)})},panBy:a=>{let{transform:c,width:d,height:e,d3Zoom:f,d3Selection:g,translateExtent:h}=b();if(!f||!g||!a.x&&!a.y)return!1;let i=bW.translate(c[0]+a.x,c[1]+a.y).scale(c[2]),j=f?.constrain()(i,[[0,0],[d,e]],h);return f.transform(g,j),c[0]!==j.x||c[1]!==j.y||c[2]!==j.k},cancelConnection:()=>a({connectionNodeId:eM.connectionNodeId,connectionHandleId:eM.connectionHandleId,connectionHandleType:eM.connectionHandleType,connectionStatus:eM.connectionStatus,connectionStartHandle:eM.connectionStartHandle,connectionEndHandle:eM.connectionEndHandle}),reset:()=>a({...eM})}),c=Object.is,d.current=b?B(b,c):B),s.default.createElement(ca,{value:d.current},a)};eN.displayName="ReactFlowProvider";let eO=({children:a})=>(0,s.useContext)(b9)?s.default.createElement(s.default.Fragment,null,a):s.default.createElement(eN,null,a);eO.displayName="ReactFlowWrapper";let eP={input:de,default:dc,output:dg,group:dh},eQ={default:cP,straight:cL,step:cK,smoothstep:cJ,simplebezier:cE},eR=[0,0],eS=[15,15],eT={x:0,y:0,zoom:1},eU={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},eV=(0,s.forwardRef)(({nodes:a,edges:b,defaultNodes:c,defaultEdges:d,className:e,nodeTypes:f=eP,edgeTypes:g=eQ,onNodeClick:h,onEdgeClick:i,onInit:j,onMove:o,onMoveStart:p,onMoveEnd:q,onConnect:r,onConnectStart:u,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:x,onNodeMouseEnter:y,onNodeMouseMove:z,onNodeMouseLeave:A,onNodeContextMenu:B,onNodeDoubleClick:C,onNodeDragStart:D,onNodeDrag:E,onNodeDragStop:F,onNodesDelete:G,onEdgesDelete:H,onSelectionChange:I,onSelectionDragStart:J,onSelectionDrag:K,onSelectionDragStop:L,onSelectionContextMenu:M,onSelectionStart:N,onSelectionEnd:O,connectionMode:P=k.Strict,connectionLineType:Q=n.Bezier,connectionLineStyle:R,connectionLineComponent:S,connectionLineContainerStyle:T,deleteKeyCode:U="Backspace",selectionKeyCode:V="Shift",selectionOnDrag:W=!1,selectionMode:X=m.Full,panActivationKeyCode:Y="Space",multiSelectionKeyCode:Z=cx()?"Meta":"Control",zoomActivationKeyCode:$=cx()?"Meta":"Control",snapToGrid:_=!1,snapGrid:aa=eS,onlyRenderVisibleElements:ab=!1,selectNodesOnDrag:ac=!0,nodesDraggable:ad,nodesConnectable:ae,nodesFocusable:af,nodeOrigin:ag=eR,edgesFocusable:ah,edgesUpdatable:ai,elementsSelectable:aj,defaultViewport:ak=eT,minZoom:al=.5,maxZoom:am=2,translateExtent:an=eL,preventScrolling:ao=!0,nodeExtent:ap,defaultMarkerColor:aq="#b1b1b7",zoomOnScroll:ar=!0,zoomOnPinch:as=!0,panOnScroll:at=!1,panOnScrollSpeed:au=.5,panOnScrollMode:av=l.Free,zoomOnDoubleClick:aw=!0,panOnDrag:ax=!0,onPaneClick:ay,onPaneMouseEnter:az,onPaneMouseMove:aA,onPaneMouseLeave:aB,onPaneScroll:aC,onPaneContextMenu:aD,children:aE,onEdgeContextMenu:aF,onEdgeDoubleClick:aG,onEdgeMouseEnter:aH,onEdgeMouseMove:aI,onEdgeMouseLeave:aJ,onEdgeUpdate:aK,onEdgeUpdateStart:aL,onEdgeUpdateEnd:aM,onReconnect:aN,onReconnectStart:aO,onReconnectEnd:aP,reconnectRadius:aQ=10,edgeUpdaterRadius:aR=10,onNodesChange:aS,onEdgesChange:aT,noDragClassName:aU="nodrag",noWheelClassName:aV="nowheel",noPanClassName:aW="nopan",fitView:aX=!1,fitViewOptions:aY,connectOnClick:aZ=!0,attributionPosition:a$,proOptions:a_,defaultEdgeOptions:a0,elevateNodesOnSelect:a1=!0,elevateEdgesOnSelect:a2=!1,disableKeyboardA11y:a3=!1,autoPanOnConnect:a4=!0,autoPanOnNodeDrag:a5=!0,connectionRadius:a6=20,isValidConnection:a7,onError:a8,style:a9,id:ba,nodeDragThreshold:bb,...bc},bd)=>{let be=ba||"1";return s.default.createElement("div",{...bc,style:{...a9,...eU},ref:bd,className:t(["react-flow",e]),"data-testid":"rf__wrapper",id:ba},s.default.createElement(eO,null,s.default.createElement(eK,{onInit:j,onMove:o,onMoveStart:p,onMoveEnd:q,onNodeClick:h,onEdgeClick:i,onNodeMouseEnter:y,onNodeMouseMove:z,onNodeMouseLeave:A,onNodeContextMenu:B,onNodeDoubleClick:C,nodeTypes:f,edgeTypes:g,connectionLineType:Q,connectionLineStyle:R,connectionLineComponent:S,connectionLineContainerStyle:T,selectionKeyCode:V,selectionOnDrag:W,selectionMode:X,deleteKeyCode:U,multiSelectionKeyCode:Z,panActivationKeyCode:Y,zoomActivationKeyCode:$,onlyRenderVisibleElements:ab,selectNodesOnDrag:ac,defaultViewport:ak,translateExtent:an,minZoom:al,maxZoom:am,preventScrolling:ao,zoomOnScroll:ar,zoomOnPinch:as,zoomOnDoubleClick:aw,panOnScroll:at,panOnScrollSpeed:au,panOnScrollMode:av,panOnDrag:ax,onPaneClick:ay,onPaneMouseEnter:az,onPaneMouseMove:aA,onPaneMouseLeave:aB,onPaneScroll:aC,onPaneContextMenu:aD,onSelectionContextMenu:M,onSelectionStart:N,onSelectionEnd:O,onEdgeContextMenu:aF,onEdgeDoubleClick:aG,onEdgeMouseEnter:aH,onEdgeMouseMove:aI,onEdgeMouseLeave:aJ,onReconnect:aN??aK,onReconnectStart:aO??aL,onReconnectEnd:aP??aM,reconnectRadius:aQ??aR,defaultMarkerColor:aq,noDragClassName:aU,noWheelClassName:aV,noPanClassName:aW,elevateEdgesOnSelect:a2,rfId:be,disableKeyboardA11y:a3,nodeOrigin:ag,nodeExtent:ap}),s.default.createElement(ds,{nodes:a,edges:b,defaultNodes:c,defaultEdges:d,onConnect:r,onConnectStart:u,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:x,nodesDraggable:ad,nodesConnectable:ae,nodesFocusable:af,edgesFocusable:ah,edgesUpdatable:ai,elementsSelectable:aj,elevateNodesOnSelect:a1,minZoom:al,maxZoom:am,nodeExtent:ap,onNodesChange:aS,onEdgesChange:aT,snapToGrid:_,snapGrid:aa,connectionMode:P,translateExtent:an,connectOnClick:aZ,defaultEdgeOptions:a0,fitView:aX,fitViewOptions:aY,onNodesDelete:G,onEdgesDelete:H,onNodeDragStart:D,onNodeDrag:E,onNodeDragStop:F,onSelectionDrag:K,onSelectionDragStart:J,onSelectionDragStop:L,noPanClassName:aW,nodeOrigin:ag,rfId:be,autoPanOnConnect:a4,autoPanOnNodeDrag:a5,onError:a8,connectionRadius:a6,isValidConnection:a7,nodeDragThreshold:bb}),s.default.createElement(dn,{onSelectionChange:I}),aE,s.default.createElement(cg,{proOptions:a_,position:a$}),s.default.createElement(dz,{rfId:be,disableKeyboardA11y:a3})))});function eW(a){return b=>{let[c,d]=(0,s.useState)(b),e=(0,s.useCallback)(b=>d(c=>a(b,c)),[]);return[c,d,e]}}function eX(a,b){if(Object.is(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;if(a instanceof Map&&b instanceof Map){if(a.size!==b.size)return!1;for(let[c,d]of a)if(!Object.is(d,b.get(c)))return!1;return!0}if(a instanceof Set&&b instanceof Set){if(a.size!==b.size)return!1;for(let c of a)if(!b.has(c))return!1;return!0}let c=Object.keys(a);if(c.length!==Object.keys(b).length)return!1;for(let d of c)if(!Object.prototype.hasOwnProperty.call(b,d)||!Object.is(a[d],b[d]))return!1;return!0}function eY(){return s.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},s.default.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function eZ(){return s.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},s.default.createElement("path",{d:"M0 0h32v4.2H0z"}))}function e$(){return s.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},s.default.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function e_(){return s.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},s.default.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function e0(){return s.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},s.default.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}eV.displayName="ReactFlow",eW(dX),eW(dY);let e1=({children:a,className:b,...c})=>s.default.createElement("button",{type:"button",className:t(["react-flow__controls-button",b]),...c},a);e1.displayName="ControlButton";let e2=a=>({isInteractive:a.nodesDraggable||a.nodesConnectable||a.elementsSelectable,minZoomReached:a.transform[2]<=a.minZoom,maxZoomReached:a.transform[2]>=a.maxZoom}),e3=({style:a,showZoom:b=!0,showFitView:c=!0,showInteractive:d=!0,fitViewOptions:e,onZoomIn:f,onZoomOut:g,onFitView:h,onInteractiveChange:i,className:j,children:k,position:l="bottom-left"})=>{let m=cd(),[n,o]=(0,s.useState)(!1),{isInteractive:p,minZoomReached:q,maxZoomReached:r}=cc(e2,eX),{zoomIn:u,zoomOut:v,fitView:w}=dK();return((0,s.useEffect)(()=>{o(!0)},[]),n)?s.default.createElement(cf,{className:t(["react-flow__controls",j]),position:l,style:a,"data-testid":"rf__controls"},b&&s.default.createElement(s.default.Fragment,null,s.default.createElement(e1,{onClick:()=>{u(),f?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:r},s.default.createElement(eY,null)),s.default.createElement(e1,{onClick:()=>{v(),g?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:q},s.default.createElement(eZ,null))),c&&s.default.createElement(e1,{className:"react-flow__controls-fitview",onClick:()=>{w(e),h?.()},title:"fit view","aria-label":"fit view"},s.default.createElement(e$,null)),d&&s.default.createElement(e1,{className:"react-flow__controls-interactive",onClick:()=>{m.setState({nodesDraggable:!p,nodesConnectable:!p,elementsSelectable:!p}),i?.(!p)},title:"toggle interactivity","aria-label":"toggle interactivity"},p?s.default.createElement(e0,null):s.default.createElement(e_,null)),k):null};e3.displayName="Controls";var e4=(0,s.memo)(e3);function e5(a,b){if(Object.is(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;if(a instanceof Map&&b instanceof Map){if(a.size!==b.size)return!1;for(let[c,d]of a)if(!Object.is(d,b.get(c)))return!1;return!0}if(a instanceof Set&&b instanceof Set){if(a.size!==b.size)return!1;for(let c of a)if(!b.has(c))return!1;return!0}let c=Object.keys(a);if(c.length!==Object.keys(b).length)return!1;for(let d of c)if(!Object.prototype.hasOwnProperty.call(b,d)||!Object.is(a[d],b[d]))return!1;return!0}function e6({color:a,dimensions:b,lineWidth:c}){return s.default.createElement("path",{stroke:a,strokeWidth:c,d:`M${b[0]/2} 0 V${b[1]} M0 ${b[1]/2} H${b[0]}`})}function e7({color:a,radius:b}){return s.default.createElement("circle",{cx:b,cy:b,r:b,fill:a})}(i=q||(q={})).Lines="lines",i.Dots="dots",i.Cross="cross";let e8={[q.Dots]:"#91919a",[q.Lines]:"#eee",[q.Cross]:"#e2e2e2"},e9={[q.Dots]:1,[q.Lines]:1,[q.Cross]:6},fa=a=>({transform:a.transform,patternId:`pattern-${a.rfId}`});function fb({id:a,variant:b=q.Dots,gap:c=20,size:d,lineWidth:e=1,offset:f=2,color:g,style:h,className:i}){let j=(0,s.useRef)(null),{transform:k,patternId:l}=cc(fa,e5),m=g||e8[b],n=d||e9[b],o=b===q.Dots,p=b===q.Cross,r=Array.isArray(c)?c:[c,c],u=[r[0]*k[2]||1,r[1]*k[2]||1],v=n*k[2],w=p?[v,v]:u,x=o?[v/f,v/f]:[w[0]/f,w[1]/f];return s.default.createElement("svg",{className:t(["react-flow__background",i]),style:{...h,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:j,"data-testid":"rf__background"},s.default.createElement("pattern",{id:l+a,x:k[0]%u[0],y:k[1]%u[1],width:u[0],height:u[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${x[0]},-${x[1]})`},o?s.default.createElement(e7,{color:m,radius:v/f}):s.default.createElement(e6,{dimensions:w,color:m,lineWidth:e})),s.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${l+a})`}))}fb.displayName="Background";var fc=(0,s.memo)(fb);let fd=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},fe=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var ff={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let fg=(0,s.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:e="",children:f,iconNode:g,...h},i)=>(0,s.createElement)("svg",{ref:i,...ff,width:b,height:b,stroke:a,strokeWidth:d?24*Number(c)/Number(b):c,className:fe("lucide",e),...!f&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(h)&&{"aria-hidden":"true"},...h},[...g.map(([a,b])=>(0,s.createElement)(a,b)),...Array.isArray(f)?f:[f]])),fh=(a,b)=>{let c=(0,s.forwardRef)(({className:c,...d},e)=>(0,s.createElement)(fg,{ref:e,iconNode:b,className:fe(`lucide-${fd(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,c),...d}));return c.displayName=fd(a),c},fi=fh("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),fj=fh("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),fk=fh("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]),fl=fh("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),fm=fh("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),fn=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},fo=a=>{let b=a?fn(a):fn,c=a=>(function(a,b=a=>a){let c=s.default.useSyncExternalStore(a.subscribe,s.default.useCallback(()=>b(a.getState()),[a,b]),s.default.useCallback(()=>b(a.getInitialState()),[a,b]));return s.default.useDebugValue(c),c})(b,a);return Object.assign(c,b),c},fp=(b=(a,b)=>({nodes:[],edges:[],history:{past:[],future:[]},onNodesChange:c=>{a({nodes:dX(c,b().nodes)})},onEdgesChange:c=>{a({edges:dY(c,b().edges)})},onConnect:c=>{b().takeSnapshot(),a({edges:cT({...c,animated:!0,type:"smoothstep",style:{stroke:"#7c3aed",strokeWidth:2}},b().edges)})},setNodes:b=>a({nodes:b}),setEdges:b=>a({edges:b}),addNode:c=>{b().takeSnapshot(),a({nodes:[...b().nodes,c]})},updateNodeData:(c,d)=>{a({nodes:b().nodes.map(a=>a.id===c?{...a,data:{...a.data,...d}}:a)})},duplicateNode:c=>{b().takeSnapshot();let{nodes:d}=b(),e=d.find(a=>a.id===c);e&&a({nodes:[...d,{...e,id:crypto.randomUUID(),position:{x:e.position.x+20,y:e.position.y+20},data:{...e.data},selected:!1}]})},deleteNode:c=>{b().takeSnapshot();let{nodes:d,edges:e}=b();a({nodes:d.filter(a=>a.id!==c),edges:e.filter(a=>a.source!==c&&a.target!==c)})},takeSnapshot:()=>{let{nodes:c,edges:d,history:e}=b();a({history:{past:[...e.past,{nodes:c,edges:d}].slice(-50),future:[]}})},undo:()=>{let{history:c,nodes:d,edges:e}=b();if(0===c.past.length)return;let f=c.past[c.past.length-1],g=c.past.slice(0,c.past.length-1);a({nodes:f.nodes,edges:f.edges,history:{past:g,future:[{nodes:d,edges:e},...c.future]}})},redo:()=>{let{history:c,nodes:d,edges:e}=b();if(0===c.future.length)return;let f=c.future[0],g=c.future.slice(1);a({nodes:f.nodes,edges:f.edges,history:{past:[...c.past,{nodes:d,edges:e}],future:g}})},saveWorkflow:()=>{let{nodes:a,edges:c}=b();localStorage.setItem("galaxy-workflow",JSON.stringify({nodes:a,edges:c})),console.log("Saved to local storage")},loadWorkflow:b=>{a({nodes:b.nodes,edges:b.edges,history:{past:[],future:[]}})}}))?fo(b):fo,fq=fh("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),fr=fh("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),fs=({title:a="untitled"})=>{let[b,c]=(0,s.useState)(a),{nodes:d,edges:e,loadWorkflow:f,undo:g,redo:h}=fp();return(0,r.jsxs)("header",{className:"h-14 bg-[#1a1a1e] border-b border-[#2a2a2e] flex items-center justify-between px-4 z-20",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-lg",children:"W"})}),(0,r.jsx)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-[#2a2a2e] rounded-lg",children:(0,r.jsx)("input",{type:"text",value:b,onChange:a=>c(a.target.value),className:"bg-transparent text-sm text-gray-300 outline-none w-32 min-w-0",placeholder:"untitled"})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center bg-[#2a2a2e] rounded-lg p-0.5 mr-2",children:[(0,r.jsx)("button",{onClick:g,className:"p-1.5 text-gray-400 hover:text-gray-200 hover:bg-[#3a3a3e] rounded-md transition-colors",title:"Undo",children:(0,r.jsx)(fj,{size:16})}),(0,r.jsx)("button",{onClick:h,className:"p-1.5 text-gray-400 hover:text-gray-200 hover:bg-[#3a3a3e] rounded-md transition-colors",title:"Redo",children:(0,r.jsx)(fk,{size:16})})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-400 hover:text-gray-200 transition-colors cursor-pointer hover:bg-[#2a2a2e] rounded-lg",children:[(0,r.jsx)(fr,{size:16}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Load"}),(0,r.jsx)("input",{type:"file",className:"hidden",accept:".json",onChange:a=>{let b=a.target.files?.[0];if(!b)return;let c=new FileReader;c.onload=a=>{try{let b=JSON.parse(a.target?.result);b.nodes&&b.edges?f(b):alert("Invalid workflow file format")}catch(a){console.error("Failed to parse workflow",a),alert("Invalid workflow file")}},c.readAsText(b),a.target.value=""}})]}),(0,r.jsxs)("button",{onClick:()=>{let a=new Blob([JSON.stringify({nodes:d,edges:e},null,2)],{type:"application/json"}),c=URL.createObjectURL(a),f=document.createElement("a");f.href=c,f.download=`${b||"workflow"}-${Date.now()}.json`,document.body.appendChild(f),f.click(),document.body.removeChild(f)},className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-400 hover:text-gray-200 transition-colors hover:bg-[#2a2a2e] rounded-lg",children:[(0,r.jsx)(fq,{size:16}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Save"})]})]})]})},ft=fh("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),fu=fh("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),fv=fh("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),fw=()=>{let a=[{type:"textNode",icon:ft,label:"Text"},{type:"imageNode",icon:fu,label:"Image"},{type:"llmNode",icon:fv,label:"LLM"}];return(0,r.jsx)("aside",{className:"w-16 h-screen bg-[#1a1a1e] border-r border-[#2a2a2e] flex flex-col items-center py-6 z-20",children:(0,r.jsx)("div",{className:"flex flex-col items-center gap-4",children:a.map((a,b)=>(0,r.jsx)("div",{draggable:!0,onDragStart:b=>{var c;return c=a.type,void(b.dataTransfer.setData("application/reactflow",c),b.dataTransfer.effectAllowed="move")},className:"w-10 h-10 flex items-center justify-center rounded-xl bg-[#2a2a2e] text-gray-400 hover:text-[#7c3aed] hover:bg-[#3a3a3e] hover:scale-105 transition-all cursor-grab active:cursor-grabbing border border-[#3a3a3e] shadow-lg group",title:`Drag to add ${a.label} Node`,children:(0,r.jsx)(a.icon,{size:20,className:"group-hover:text-[#7c3aed] transition-colors"})},b))})})},fx=fh("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),fy=fh("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),fz=fh("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),fA=(0,s.memo)(({id:a,data:b,selected:c})=>{let d=fp(a=>a.updateNodeData),e=fp(a=>a.duplicateNode),f=fp(a=>a.deleteNode),[g,h]=(0,s.useState)(!1),i=(0,s.useRef)(null);(0,s.useEffect)(()=>{let a=a=>{i.current&&!i.current.contains(a.target)&&h(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let j=(0,s.useCallback)(b=>{d(a,{text:b.target.value})},[a,d]),k=(0,s.useCallback)(b=>{d(a,{label:b.target.value})},[a,d]);return(0,r.jsxs)("div",{className:`
        min-w-[280px] max-w-[320px] 
        bg-[#f5f0e6] 
        rounded-xl shadow-lg
        border transition-all duration-200
        ${c?"border-[#7c3aed] shadow-[#7c3aed]/20 shadow-xl":"border-[#e8e0d0] hover:border-[#7c3aed]/50"}
      `,children:[(0,r.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between relative",children:[(0,r.jsx)("input",{type:"text",value:b.label||"Prompt",onChange:k,className:"text-sm font-medium bg-transparent border-none outline-none text-gray-700 placeholder-gray-400",placeholder:"Prompt"}),(0,r.jsx)("button",{onClick:()=>h(!g),className:"p-1 hover:bg-black/5 rounded transition-colors",children:(0,r.jsx)(fx,{size:16,className:"text-gray-500"})}),g&&(0,r.jsxs)("div",{ref:i,className:"absolute top-8 right-2 w-32 bg-white rounded-lg shadow-xl border border-gray-100 z-50 overflow-hidden",children:[(0,r.jsxs)("button",{onClick:()=>{e(a),h(!1)},className:"w-full px-3 py-2 text-sm text-left text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(fy,{size:14}),"Duplicate"]}),(0,r.jsx)("div",{className:"h-px bg-gray-100"}),(0,r.jsxs)("button",{onClick:()=>{f(a),h(!1)},className:"w-full px-3 py-2 text-sm text-left text-red-600 hover:bg-red-50 flex items-center gap-2",children:[(0,r.jsx)(fz,{size:14}),"Delete"]})]})]}),(0,r.jsx)("div",{className:"px-4 pb-4",children:(0,r.jsx)("textarea",{value:b.text||"",onChange:j,placeholder:"Enter text content...",className:"   w-full min-h-[100px] max-h-[200px]   p-0 text-sm   bg-transparent   border-none   focus:outline-none focus:ring-0   text-slate-700   placeholder-slate-400   resize-none   leading-relaxed   light-scrollbar   "})}),(0,r.jsx)(da,{type:"source",position:p.Right,id:"source",className:"!w-3 !h-3 !bg-[#7c3aed] !border-2 !border-[#1a1a1e]"}),(0,r.jsx)(da,{type:"target",position:p.Left,id:"target",className:"!w-3 !h-3 !bg-[#7c3aed] !border-2 !border-[#1a1a1e]"})]})}),fB=fh("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),fC=(0,s.memo)(({id:a,data:b,selected:c})=>{let d=fp(a=>a.updateNodeData),e=fp(a=>a.duplicateNode),f=fp(a=>a.deleteNode),g=(0,s.useRef)(null),[h,i]=(0,s.useState)(!1),j=(0,s.useRef)(null);(0,s.useEffect)(()=>{let a=a=>{j.current&&!j.current.contains(a.target)&&i(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let k=(0,s.useCallback)(b=>{d(a,{label:b.target.value})},[a,d]),l=(0,s.useCallback)(b=>{let c=b.target.files?.[0];if(!c)return;if(!c.type.startsWith("image/"))return void alert("Please upload an image file");let e=new FileReader;e.onload=b=>{d(a,{imageData:b.target?.result,fileName:c.name})},e.readAsDataURL(c)},[a,d]),m=(0,s.useCallback)(()=>{d(a,{imageData:void 0,fileName:void 0}),g.current&&(g.current.value="")},[a,d]);return(0,r.jsxs)("div",{className:`
        min-w-[200px] max-w-[240px] 
        bg-[#f5f0e6] 
        rounded-xl shadow-lg
        border transition-all duration-200
        ${c?"border-[#7c3aed] shadow-[#7c3aed]/20 shadow-xl":"border-[#e8e0d0] hover:border-[#7c3aed]/50"}
      `,children:[(0,r.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between border-b border-[#e8e0d0] relative",children:[(0,r.jsx)("input",{type:"text",value:b.label||"Image",onChange:k,className:"text-sm font-medium bg-transparent border-none outline-none text-gray-700 placeholder-gray-400 flex-1",placeholder:"Image"}),(0,r.jsx)("button",{onClick:()=>i(!h),className:"p-1 hover:bg-black/5 rounded transition-colors",children:(0,r.jsx)(fx,{size:16,className:"text-gray-500"})}),h&&(0,r.jsxs)("div",{ref:j,className:"absolute top-8 right-2 w-32 bg-white rounded-lg shadow-xl border border-gray-100 z-50 overflow-hidden",children:[(0,r.jsxs)("button",{onClick:()=>{e(a),i(!1)},className:"w-full px-3 py-2 text-sm text-left text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(fy,{size:14}),"Duplicate"]}),(0,r.jsx)("div",{className:"h-px bg-gray-100"}),(0,r.jsxs)("button",{onClick:()=>{f(a),i(!1)},className:"w-full px-3 py-2 text-sm text-left text-red-600 hover:bg-red-50 flex items-center gap-2",children:[(0,r.jsx)(fz,{size:14}),"Delete"]})]})]}),(0,r.jsxs)("div",{className:"p-4",children:[b.imageData?(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("img",{src:b.imageData,alt:b.fileName||"Uploaded image",className:"w-full h-auto max-h-[160px] object-contain rounded-lg ring-1 ring-[#e8e0d0] shadow-sm bg-white transition-shadow hover:shadow-md"}),(0,r.jsx)("button",{onClick:m,className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:bg-red-600",title:"Remove image",children:""})]}):(0,r.jsxs)("button",{onClick:()=>{g.current?.click()},className:"   w-full py-6 px-4   border-2 border-dashed border-[#dcd6c8]   rounded-lg   hover:border-[#7c3aed] hover:bg-[#7c3aed]/5   transition-all duration-200   flex flex-col items-center justify-center gap-2   group   ",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-[#e8e0d0] flex items-center justify-center text-gray-500 group-hover:text-[#7c3aed] transition-colors",children:(0,r.jsx)(fB,{size:20})}),(0,r.jsx)("span",{className:"text-xs font-medium text-gray-500 group-hover:text-[#7c3aed]",children:"Upload Image"})]}),(0,r.jsx)("input",{ref:g,type:"file",accept:"image/*",onChange:l,className:"hidden"})]}),(0,r.jsx)(da,{type:"source",position:p.Right,id:"source",className:"!w-3 !h-3 !bg-[#7c3aed] !border-2 !border-[#1a1a1e]"}),(0,r.jsx)(da,{type:"target",position:p.Left,id:"target",className:"!w-3 !h-3 !bg-[#7c3aed] !border-2 !border-[#1a1a1e]"})]})}),fD=fh("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),fE=fh("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),fF=fh("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),fG=fh("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),fH=(0,s.memo)(({id:a,data:b,selected:c})=>{let d=fp(a=>a.updateNodeData),e=fp(a=>a.duplicateNode),f=fp(a=>a.deleteNode),{getEdges:g,getNode:h}=dK(),[i,j]=(0,s.useState)(!1),[k,l]=(0,s.useState)(!1),[m,n]=(0,s.useState)(!1),o=(0,s.useRef)(null);(0,s.useEffect)(()=>{let a=a=>{o.current&&!o.current.contains(a.target)&&n(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let q=(0,s.useCallback)(b=>{d(a,{label:b.target.value})},[a,d]),t=(0,s.useCallback)(b=>{d(a,{model:b}),l(!1)},[a,d]),u=(0,s.useCallback)(async()=>{j(!0),d(a,{isLoading:!0,error:void 0});try{let c=g().filter(b=>b.target===a),e="",f="",i=[];for(let a of c){let b=h(a.source);if(!b)continue;let c=a.targetHandle;if("textNode"===b.type){let a=b.data.text||"";"system"===c?e+=a+"\n":"user"===c&&(f+=a+"\n")}else if("imageNode"===b.type){let a=b.data.imageData;a&&"images"===c&&i.push(a)}else if("llmNode"===b.type){let a=b.data.output;a&&"user"===c&&(f+=a+"\n")}}d(a,{inputSystem:e.trim(),inputUser:f.trim(),inputImages:i});let j=await fetch("/api/run-llm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:b.model,systemPrompt:e.trim(),userMessage:f.trim(),images:i})});if(!j.ok){let a=await j.json();throw Error(a.error||"Failed to run LLM")}let k=await j.json();d(a,{output:k.text,isLoading:!1})}catch(b){console.error("LLM Error:",b),d(a,{error:b.message||"An error occurred",isLoading:!1})}finally{j(!1)}},[a,b.model,d,g,h]),v=[{value:"gemini-1.5-flash",label:"Gemini 1.5 Flash"},{value:"gemini-1.5-pro",label:"Gemini 1.5 Pro"},{value:"gemini-2.5-flash",label:"Gemini 2.5 Flash"}];return(0,r.jsxs)("div",{className:`
        min-w-[280px] max-w-[340px] 
        bg-[#f5f0e6] 
        rounded-xl shadow-lg
        border transition-all duration-200
        ${c?"border-[#7c3aed] shadow-[#7c3aed]/20 shadow-xl":"border-[#e8e0d0] hover:border-[#7c3aed]/50"}
      `,children:[(0,r.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between border-b border-[#e8e0d0] relative",children:[(0,r.jsx)("input",{type:"text",value:b.label||"LLM Node",onChange:q,className:"text-sm font-medium bg-transparent border-none outline-none text-gray-700 placeholder-gray-400 flex-1",placeholder:"LLM Node"}),(0,r.jsx)("button",{onClick:()=>n(!m),className:"p-1 hover:bg-black/5 rounded transition-colors",children:(0,r.jsx)(fx,{size:16,className:"text-gray-500"})}),m&&(0,r.jsxs)("div",{ref:o,className:"absolute top-8 right-2 w-32 bg-white rounded-lg shadow-xl border border-gray-100 z-50 overflow-hidden",children:[(0,r.jsxs)("button",{onClick:()=>{e(a),n(!1)},className:"w-full px-3 py-2 text-sm text-left text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(fy,{size:14}),"Duplicate"]}),(0,r.jsx)("div",{className:"h-px bg-gray-100"}),(0,r.jsxs)("button",{onClick:()=>{f(a),n(!1)},className:"w-full px-3 py-2 text-sm text-left text-red-600 hover:bg-red-50 flex items-center gap-2",children:[(0,r.jsx)(fz,{size:14}),"Delete"]})]})]}),(0,r.jsxs)("div",{className:"p-4 space-y-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>l(!k),className:"w-full px-3 py-2 text-sm bg-white/60 border border-[#e8e0d0] rounded-lg flex items-center justify-between text-gray-700 hover:bg-white/80 transition-colors",children:[(0,r.jsx)("span",{children:v.find(a=>a.value===b.model)?.label||"Select Model"}),(0,r.jsx)(fG,{size:14,className:`transition-transform ${k?"rotate-180":""}`})]}),k&&(0,r.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white rounded-lg border border-[#e8e0d0] shadow-lg z-10 overflow-hidden",children:v.map(a=>(0,r.jsx)("button",{onClick:()=>t(a.value),className:`w-full px-3 py-2 text-sm text-left hover:bg-gray-50 transition-colors ${b.model===a.value?"bg-[#7c3aed]/10 text-[#7c3aed]":"text-gray-700"}`,children:a.label},a.value))})]}),(0,r.jsx)("button",{onClick:u,disabled:i,className:"   w-full px-4 py-2.5   bg-[#7c3aed]   hover:bg-[#6d28d9]   text-white font-medium text-sm   rounded-lg   disabled:opacity-50 disabled:cursor-not-allowed   transition-all duration-200   flex items-center justify-center gap-2   shadow-md hover:shadow-lg   ",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(fE,{size:16,className:"animate-spin"}),"Running..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(fD,{size:16}),"Run Model"]})}),b.error&&(0,r.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(fF,{size:16,className:"text-red-600 mt-0.5 flex-shrink-0"}),(0,r.jsx)("div",{className:"text-xs text-red-700",children:b.error})]})}),b.output&&(0,r.jsxs)("div",{className:"group relative overflow-hidden rounded-xl bg-gradient-to-br from-white to-[#fdfbf7] p-4 shadow-sm ring-1 ring-[#e8e0d0] transition-all duration-300 hover:shadow-md",children:[(0,r.jsx)("div",{className:"mb-3 flex items-center justify-between border-b border-[#f0ebe0] pb-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded-md bg-[#7c3aed]/10 text-[#7c3aed]",children:(0,r.jsx)(fv,{size:14})}),(0,r.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider text-[#7c3aed]",children:"Generated Response"})]})}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("div",{className:"light-scrollbar max-h-[200px] overflow-y-auto pr-2 text-[13px] leading-relaxed text-slate-700",children:b.output})})]})]}),(0,r.jsx)(da,{type:"target",position:p.Left,id:"system",style:{top:"30%"},className:"!w-3 !h-3 !bg-[#7c3aed] !border-2 !border-[#1a1a1e]"}),(0,r.jsx)(da,{type:"target",position:p.Left,id:"user",style:{top:"50%"},className:"!w-3 !h-3 !bg-[#7c3aed] !border-2 !border-[#1a1a1e]"}),(0,r.jsx)(da,{type:"target",position:p.Left,id:"images",style:{top:"70%"},className:"!w-3 !h-3 !bg-[#7c3aed] !border-2 !border-[#1a1a1e]"}),(0,r.jsx)(da,{type:"source",position:p.Right,id:"source",className:"!w-3 !h-3 !bg-[#7c3aed] !border-2 !border-[#1a1a1e]"})]})}),fI={stroke:"#7c3aed",strokeWidth:2},fJ=[{id:"img1",type:"imageNode",position:{x:50,y:50},data:{label:"Product Photo 1"}},{id:"img2",type:"imageNode",position:{x:50,y:350},data:{label:"Product Photo 2"}},{id:"img3",type:"imageNode",position:{x:50,y:650},data:{label:"Product Photo 3"}},{id:"sys",type:"textNode",position:{x:400,y:50},data:{label:"System Prompt",text:"You are an expert e-commerce copywriter. Analyze the product images and details provided."}},{id:"prod",type:"textNode",position:{x:400,y:350},data:{label:"Product Details",text:"Product: Noise Cancelling Headphones. Features: 30h battery, active noise cancellation, deep bass."}},{id:"analyze",type:"llmNode",position:{x:800,y:200},data:{label:"Analyze Product",model:"gemini-1.5-flash"}},{id:"inst1",type:"textNode",position:{x:900,y:-100},data:{label:"Amazon Prompt",text:"Write a professional Amazon listing based on the product analysis."}},{id:"inst2",type:"textNode",position:{x:900,y:250},data:{label:"Instagram Prompt",text:"Write a fun Instagram caption with hashtags based on the analysis."}},{id:"inst3",type:"textNode",position:{x:900,y:550},data:{label:"SEO Prompt",text:"Write a concise SEO meta description."}},{id:"amazon",type:"llmNode",position:{x:1200,y:0},data:{label:"Write Amazon Listing",model:"gemini-1.5-flash"}},{id:"insta",type:"llmNode",position:{x:1200,y:300},data:{label:"Write Instagram Caption",model:"gemini-1.5-flash"}},{id:"seo",type:"llmNode",position:{x:1200,y:600},data:{label:"Write SEO Description",model:"gemini-1.5-flash"}},{id:"out1",type:"textNode",position:{x:1600,y:0},data:{label:"Amazon Output",text:""}},{id:"out2",type:"textNode",position:{x:1600,y:300},data:{label:"Insta Output",text:""}},{id:"out3",type:"textNode",position:{x:1600,y:600},data:{label:"SEO Output",text:""}}],fK=[{id:"e1",source:"img1",target:"analyze",targetHandle:"images",animated:!0,type:"smoothstep",style:fI},{id:"e2",source:"img2",target:"analyze",targetHandle:"images",animated:!0,type:"smoothstep",style:fI},{id:"e3",source:"img3",target:"analyze",targetHandle:"images",animated:!0,type:"smoothstep",style:fI},{id:"e4",source:"sys",target:"analyze",targetHandle:"system",animated:!0,type:"smoothstep",style:fI},{id:"e5",source:"prod",target:"analyze",targetHandle:"user",animated:!0,type:"smoothstep",style:fI},{id:"e_inst1",source:"inst1",target:"amazon",targetHandle:"system",animated:!0,type:"smoothstep",style:fI},{id:"e_inst2",source:"inst2",target:"insta",targetHandle:"system",animated:!0,type:"smoothstep",style:fI},{id:"e_inst3",source:"inst3",target:"seo",targetHandle:"system",animated:!0,type:"smoothstep",style:fI},{id:"e6",source:"analyze",target:"amazon",targetHandle:"user",animated:!0,type:"smoothstep",style:fI},{id:"e7",source:"analyze",target:"insta",targetHandle:"user",animated:!0,type:"smoothstep",style:fI},{id:"e8",source:"analyze",target:"seo",targetHandle:"user",animated:!0,type:"smoothstep",style:fI},{id:"e9",source:"amazon",target:"out1",targetHandle:"target",animated:!0,type:"smoothstep",style:fI},{id:"e10",source:"insta",target:"out2",targetHandle:"target",animated:!0,type:"smoothstep",style:fI},{id:"e11",source:"seo",target:"out3",targetHandle:"target",animated:!0,type:"smoothstep",style:fI}],fL={textNode:fA,imageNode:fC,llmNode:fH},fM={type:"smoothstep",animated:!0,style:{stroke:"#7c3aed",strokeWidth:2}};function fN(){let{nodes:a,edges:b,onNodesChange:c,onEdgesChange:d,onConnect:e,addNode:f,setNodes:g,setEdges:h,undo:i,redo:j}=fp(),{screenToFlowPosition:k,fitView:l,zoomIn:m,zoomOut:o,getZoom:p}=dK();(0,s.useEffect)(()=>{0===a.length&&(g(fJ),h(fK))},[]);let t=(0,s.useCallback)(a=>{a.preventDefault(),a.dataTransfer.dropEffect="move"},[]),u=(0,s.useCallback)(a=>{a.preventDefault();let b=a.dataTransfer.getData("application/reactflow");if(void 0===b||!b)return;let c=k({x:a.clientX,y:a.clientY}),d={id:crypto.randomUUID(),type:b,position:c,data:{}};"llmNode"===b&&(d.data={label:"New Model",model:"gemini-1.5-flash"}),"textNode"===b&&(d.data={label:"Prompt",text:""}),"imageNode"===b&&(d.data={label:"Image",imageData:null}),f(d)},[k,f]);return(0,r.jsxs)("div",{className:"flex flex-col w-full h-screen overflow-hidden bg-[#1a1a1e]",children:[(0,r.jsx)(fs,{}),(0,r.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,r.jsx)(fw,{}),(0,r.jsxs)("div",{className:"flex-1 h-full relative",children:[(0,r.jsxs)(eV,{nodes:a,edges:b,onNodesChange:c,onEdgesChange:d,onConnect:e,nodeTypes:fL,defaultEdgeOptions:fM,connectionLineType:n.SmoothStep,connectionLineStyle:{stroke:"#7c3aed",strokeWidth:2},onDragOver:t,onDrop:u,fitView:!0,className:"bg-[#1a1a1e]",minZoom:.1,maxZoom:4,proOptions:{hideAttribution:!0},children:[(0,r.jsx)(fc,{variant:q.Dots,gap:24,size:1,color:"#3a3a3e"}),(0,r.jsx)(e4,{className:"!bg-[#2a2a2e] !border-[#3a3a3e] !rounded-lg !shadow-lg",showInteractive:!1})]}),(0,r.jsxs)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex items-center gap-2 px-3 py-2 bg-[#2a2a2e] border border-[#3a3a3e] rounded-lg shadow-lg",children:[(0,r.jsx)("button",{onClick:()=>l(),className:"w-8 h-8 flex items-center justify-center rounded-md bg-[#7c3aed] text-white hover:bg-[#6d28d9] transition-colors",title:"Fit View",children:(0,r.jsx)(fi,{size:16})}),(0,r.jsx)("button",{onClick:()=>m(),className:"w-8 h-8 flex items-center justify-center rounded-md text-gray-400 hover:text-gray-200 hover:bg-[#3a3a3e] transition-colors",title:"Zoom In",children:(0,r.jsx)(fl,{size:16})}),(0,r.jsx)("button",{onClick:()=>o(),className:"w-8 h-8 flex items-center justify-center rounded-md text-gray-400 hover:text-gray-200 hover:bg-[#3a3a3e] transition-colors",title:"Zoom Out",children:(0,r.jsx)(fm,{size:16})}),(0,r.jsx)("div",{className:"w-px h-5 bg-[#3a3a3e]"}),(0,r.jsx)("button",{onClick:i,className:"w-8 h-8 flex items-center justify-center rounded-md text-gray-400 hover:text-gray-200 hover:bg-[#3a3a3e] transition-colors",title:"Undo",children:(0,r.jsx)(fj,{size:16})}),(0,r.jsx)("button",{onClick:j,className:"w-8 h-8 flex items-center justify-center rounded-md text-gray-400 hover:text-gray-200 hover:bg-[#3a3a3e] transition-colors",title:"Redo",children:(0,r.jsx)(fk,{size:16})})]})]})]})]})}function fO(){return(0,r.jsx)(eN,{children:(0,r.jsx)(fN,{})})}a.s(["default",()=>fO],40777)}];

//# sourceMappingURL=_c30a4d03._.js.map